/**
 * @license
 * Copyright 2025 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@tensorflow/tfjs-core"),require("fs"),require("path"),require("perf_hooks"),require("os")):"function"==typeof define&&define.amd?define(["exports","@tensorflow/tfjs-core","fs","path","perf_hooks","os"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).tf=e.tf||{},e.tf.wasm=e.tf.wasm||{}),e.tf,e.fs,e.path,e.perf_hooks,e.require$$4)}(this,(function(e,t,n,a,r,i){"use strict";function o(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}}))})),e}var s,u,d,l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},l(e,t)};function c(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{u(a.next(e))}catch(e){i(e)}}function s(e){try{u(a.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((a=a.apply(e,t||[])).next())}))}function p(e,t){var n,a,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,a=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}function h(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(s||(s={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(u||(u={}));var b={kernelName:t._FusedMatMul,backendName:"wasm",setupFunc:function(e){d=e.wasm.cwrap(t._FusedMatMul,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.a,o=n.b,s=n.bias,l=n.preluActivationWeights;if("float32"!==i.dtype||"float32"!==o.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var c=r.transposeA,p=r.transposeB,m=r.activation,b=r.leakyreluAlpha,g=a.dataIdMap.get(i.dataId).id,_=a.dataIdMap.get(o.dataId).id,y=0;if(null!=s){var v=a.dataIdMap.get(s.dataId);if(1!==v.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got "+"rank ".concat(v.shape.length,"."));y=v.id}var k=null==l?0:a.dataIdMap.get(l.dataId).id,w=u[m];if(null==w)throw new Error("".concat(m," activation not yet supported for FusedConv2D ")+"in the wasm backend.");var I=c?i.shape[2]:i.shape[1],S=p?o.shape[1]:o.shape[2],M=t.broadcast_util.assertAndGetBroadcastShape(i.shape.slice(0,-2),o.shape.slice(0,-2)),A=a.makeOutput(h(h([],f(M),!1),[I,S],!1),i.dtype),F=a.dataIdMap.get(A.dataId).id,E=new Uint8Array(new Int32Array(i.shape).buffer),T=new Uint8Array(new Int32Array(o.shape).buffer);return d(g,E,i.shape.length,_,T,o.shape.length,c,p,w,y,k,b||0,F),A}};function g(e,n){var a;return{kernelName:e,backendName:"wasm",setupFunc:function(t){a=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){var r=e.backend,i=e.inputs.x,o=r.dataIdMap.get(i.dataId).id,u=r.makeOutput(i.shape,n||i.dtype),d=r.dataIdMap.get(u.dataId).id;return 0===t.util.sizeFromShape(u.shape)||a(o,s[i.dtype],d),u}}}var _=g(t.Abs),y=g(t.Acos),v=g(t.Acosh);function k(e,n,a){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){var n=e.backend,i=e.inputs,o=i.a,u=i.b,d=n.dataIdMap.get(o.dataId).id,l=n.dataIdMap.get(u.dataId).id,c=null!=a?a:o.dtype,p=t.backend_util.assertAndGetBroadcastShape(o.shape,u.shape),m=n.makeOutput(p,c);if(0===t.util.sizeFromShape(p))return m;var f=new Uint8Array(new Int32Array(o.shape).buffer),h=new Uint8Array(new Int32Array(u.shape).buffer),b=n.dataIdMap.get(m.dataId).id;return r(d,f,o.shape.length,l,h,u.shape.length,s[o.dtype],b),m}}}var w,I=k(t.Add);var S={kernelName:t.AddN,backendName:"wasm",setupFunc:function(e){w=e.wasm.cwrap(t.AddN,null,["array","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=a.makeOutput(n[0].shape,n[0].dtype);if(0===t.util.sizeFromShape(r.shape))return r;var i=n.map((function(e){return a.dataIdMap.get(e.dataId).id})),o=new Uint8Array(new Int32Array(i).buffer),u=a.dataIdMap.get(r.dataId).id;return w(o,i.length,s[r.dtype],u),r}};function M(e){var n=e.inputs.x,a=e.backend;if("string"===n.dtype)return t.tensor(a.readSync(n.dataId),n.shape,n.dtype);var r=a.makeOutput(n.shape,n.dtype),i=a.typedArrayFromHeap(n);return a.typedArrayFromHeap(r).set(i),r}var A,F={kernelName:t.Identity,backendName:"wasm",kernelFunc:M};function E(e){for(var t=e.inputs,n=e.backend,a=e.attrs,r=f(function(e,t){for(var n=[],a=[],r=0;r<e.length;++r)1!==e[r]&&n.push(e[r]),1!==e[t[r]]&&a.push(t[r]);for(r=0;r<a.length;++r){for(var i=-1,o=0;o<a.length;++o)a[o]>=r&&(-1===i||a[i]>a[o])&&(i=o);a[i]=r}return[n,a]}(t.x.shape,a.perm),2),i=r[0],o=r[1],u=!0,d=0;d<o.length;d++)o[d]!==d&&(u=!1);var l=function(e,t){for(var n=new Array(e.length),a=0;a<n.length;a++)n[a]=e[t[a]];return n}(t.x.shape,a.perm),c={dataId:t.x.dataId,shape:i,dtype:t.x.dtype};if(u){var p=M({inputs:t,backend:n});return p.shape=l,p}var m=n.makeOutput(l,c.dtype),h=n.dataIdMap.get(c.dataId).id,b=n.dataIdMap.get(m.dataId).id,g=new Uint8Array(new Int32Array(o).buffer),_=new Uint8Array(new Int32Array(c.shape).buffer);return A(h,_,c.shape.length,s[c.dtype],b,g,o.length),m}var T,x={kernelName:t.Transpose,backendName:"wasm",kernelFunc:E,setupFunc:function(e){A=e.wasm.cwrap(t.Transpose,null,["number","array","number","number","number","array","number"])}};function D(e,n,a){var r=e.shape,i=e.shape.length,o=t.util.parseAxisParam(n,r),s=o,u=t.backend_util.getAxesPermutation(s,i),d=null,l=!1;if(null!=u){for(var c=new Array(i),p=0;p<c.length;p++)c[p]=r[u[p]];s=t.backend_util.getInnerMostAxes(s.length,i),d=E({inputs:{x:e},attrs:{perm:u},backend:a});var m=a.dataIdMap.get(e.dataId).id;a.dataIdMap.get(d.dataId).id!==m&&(l=!0)}return{transposed:d,originalAxes:o,axes:s,inputWasTransposed:l}}var N,C={kernelName:t.All,backendName:"wasm",setupFunc:function(e){T=e.wasm.cwrap(t.All,null,["number, number, number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=r.axis,o=r.keepDims,s=a.x,u=n.dataIdMap.get(s.dataId).id,d=s,l=D(s,i,n),c=l.transposed,p=l.axes,m=l.originalAxes,h=l.inputWasTransposed;h&&(d=c,u=n.dataIdMap.get(c.dataId).id);var b=d.shape.length;t.backend_util.assertAxesAreInnerMostDims("all",p,b);var g=f(t.backend_util.computeOutAndReduceShapes(d.shape,p),2),_=g[0],y=g[1],v=t.util.sizeFromShape(y),k=n.makeOutput(_,s.dtype);if(0!==t.util.sizeFromShape(d.shape)){var w=n.dataIdMap.get(k.dataId).id;T(u,v,w)}if(h&&n.disposeData(c.dataId),o){var I=t.backend_util.expandShapeToKeepDim(k.shape,m);k.shape=I}return k}};var R={kernelName:t.Any,backendName:"wasm",setupFunc:function(e){N=e.wasm.cwrap(t.Any,null,["number, number, number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=r.axis,o=r.keepDims,s=a.x,u=n.dataIdMap.get(s.dataId).id,d=s,l=D(s,i,n),c=l.transposed,p=l.axes,m=l.originalAxes,h=l.inputWasTransposed;h&&(d=c,u=n.dataIdMap.get(c.dataId).id);var b=d.shape.length;t.backend_util.assertAxesAreInnerMostDims("any",p,b);var g=f(t.backend_util.computeOutAndReduceShapes(d.shape,p),2),_=g[0],y=g[1],v=t.util.sizeFromShape(y),k=n.makeOutput(_,s.dtype);if(0!==t.util.sizeFromShape(d.shape)){var w=n.dataIdMap.get(k.dataId).id;N(u,v,w)}if(h&&n.disposeData(c.dataId),o){var I=t.backend_util.expandShapeToKeepDim(k.shape,m);k.shape=I}return k}};function P(e){var n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number","number","number"])},kernelFunc:function(e){var a=e.backend,r=e.inputs,i=e.attrs.axis,o=r.x,u=a.dataIdMap.get(o.dataId).id,d=u,l=o,c=D(o,i,a),p=c.transposed,m=c.axes,f=c.inputWasTransposed;if(f){var h=a.dataIdMap.get(p.dataId).id;h!==u&&(l=p,d=h)}var b=l.shape.slice(0,-1),g=a.makeOutput(b,"int32"),_=a.dataIdMap.get(g.dataId).id,y=t.util.sizeFromShape(g.shape),v=l.shape[m[0]];return n(d,s[l.dtype],y,v,_),f&&a.disposeData(p.dataId),g}}}var O,L=P(t.ArgMax),W=P(t.ArgMin),U=g(t.Asin),B=g(t.Asinh),z=g(t.Atan),G=k(t.Atan2),H=g(t.Atanh);var j,V={kernelName:t.AvgPool,backendName:"wasm",setupFunc:function(e){O=e.wasm.cwrap(t.AvgPool,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.attrs,r=e.backend,i=n.x,o=r.dataIdMap.get(i.dataId).id,s=a.filterSize,u=a.strides,d=a.pad,l=a.dimRoundingMode,c=t.backend_util.computePool2DInfo(i.shape,s,u,1,d,l),p=c.filterHeight,m=c.filterWidth,f=c.padInfo.top,h=c.padInfo.right,b=c.padInfo.bottom,g=c.padInfo.left,_=c.strideHeight,y=c.strideWidth,v=c.inChannels;if("channelsLast"!==c.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(c.dataFormat,"'. Please use 'channelsLast'."));if(1!==c.dilationWidth||1!==c.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], "+"got [".concat(c.dilationHeight,", ").concat(c.dilationWidth,"]."));var k=r.makeOutput(c.outShape,"float32"),w=r.dataIdMap.get(k.dataId).id;return O(o,i.shape[0],i.shape[1],i.shape[2],p,m,f,h,b,g,_,y,v,w),k}};var q,Y={kernelName:t.AvgPool3D,backendName:"wasm",setupFunc:function(e){j=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.filterSize,s=r.strides,u=r.pad,d=r.dimRoundingMode,l=r.dataFormat,c=t.backend_util.computePool3DInfo(i.shape,o,s,1,u,d,l),p=a.makeOutput(c.outShape,i.dtype);return j(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(p.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),p}};var J,K={kernelName:t.AvgPool3DGrad,backendName:"wasm",setupFunc:function(e){q=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.input,s=r.filterSize,u=r.strides,d=r.pad,l=r.dimRoundingMode,c=t.backend_util.computePool3DInfo(o.shape,s,u,1,d,l),p=a.makeOutput(o.shape,o.dtype);return q(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(p.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left,c.filterDepth,c.filterHeight,c.filterWidth),p}};var Q={kernelName:t.AvgPoolGrad,backendName:"wasm",setupFunc:function(e){J=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.input,s=r.filterSize,u=r.strides,d=r.pad,l=t.backend_util.computePool2DInfo(o.shape,s,u,1,d),c=a.makeOutput(o.shape,o.dtype);return J(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(c.dataId).id,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left,l.filterHeight,l.filterWidth),c}};function X(e){var n=e.inputs,a=e.attrs,r=n.x,i=a.shape,o=t.util.sizeFromShape(r.shape),s=t.util.inferFromImplicitShape(i,o);return t.util.assert(o===t.util.sizeFromShape(s),(function(){return"new shape: ".concat(s,", old shape: ").concat(r.shape,". New shape and old ")+"shape must have the same number of elements."})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:s,dtype:r.dtype}}var Z,$={kernelName:t.Reshape,backendName:"wasm",kernelFunc:X};var ee={kernelName:t.BatchMatMul,backendName:"wasm",setupFunc:function(e){Z=e.wasm.cwrap(t.BatchMatMul,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.a,o=n.b,s=r.transposeA,u=r.transposeB;if("float32"!==i.dtype||"float32"!==o.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var d=i.shape.length,l=o.shape.length,c=s?i.shape[d-2]:i.shape[d-1],p=u?o.shape[l-1]:o.shape[l-2],m=s?i.shape[d-1]:i.shape[d-2],f=u?o.shape[l-2]:o.shape[l-1],h=i.shape.slice(0,-2),b=o.shape.slice(0,-2),g=t.util.sizeFromShape(h),_=t.util.sizeFromShape(b),y=t.broadcast_util.assertAndGetBroadcastShape(i.shape.slice(0,-2),o.shape.slice(0,-2)).concat([m,f]);t.util.assert(c===p,(function(){return"Error in matMul: inner shapes (".concat(c,") and (")+"".concat(p,") of Tensors with shapes ").concat(i.shape," and ")+"".concat(o.shape," and transposeA=").concat(s)+" and transposeB=".concat(u," must match.")}));var v=u?[_,f,p]:[_,p,f],k=X({inputs:{x:i},backend:a,attrs:{shape:s?[g,c,m]:[g,m,c]}}),w=X({inputs:{x:o},backend:a,attrs:{shape:v}}),I=a.dataIdMap.get(k.dataId).id,S=a.dataIdMap.get(w.dataId).id,M=s?k.shape[2]:k.shape[1],A=u?w.shape[1]:w.shape[2],F=Math.max(g,_),E=a.makeOutput([F,M,A],k.dtype),T=a.dataIdMap.get(E.dataId).id,x=new Uint8Array(new Int32Array(k.shape).buffer),D=new Uint8Array(new Int32Array(w.shape).buffer);return Z(I,x,k.shape.length,S,D,w.shape.length,s,u,T),a.disposeData(k.dataId),a.disposeData(w.dataId),E.shape=y,E}};function te(e,n,a,r,i){var o=t.slice_util.isSliceContinous(r,n,a),s=t.util.sizeFromShape(a),u=t.util.computeStrides(r);if(o){var d=t.slice_util.computeFlatOffset(n,u);return"string"===i?e.slice(d,d+s):e.subarray(d,d+s)}for(var l="string"===i?t.backend_util.fromUint8ToStringArray(e):e,c=t.buffer(r,i,l),p=t.buffer(a,i),m=0;m<p.size;++m){var b=p.indexToLoc(m),g=b.map((function(e,t){return e+n[t]}));p.set.apply(p,h([c.get.apply(c,h([],f(g),!1))],f(b),!1))}return"string"===i?t.backend_util.fromStringArrayToUint8(p.values):p.values}t.backend_util.RowPartitionType;var ne=function(){function e(e,n,a,r,i,o){this.separator=t.util.encodeString(e),this.nGramWidths=n,this.leftPad=t.util.encodeString(a),this.rightPad=t.util.encodeString(r),this.padWidth=i,this.preserveShort=o}return e.prototype.getPadWidth=function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)},e.prototype.getNumNGrams=function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)},e.prototype.createNGrams=function(e,t,n,a,r,i){for(var o=function(o){var u=s.getPadWidth(i),d=Math.max(0,u-o),l=Math.max(0,u-(r-(o+1))),c=i-(d+l),p=t+(d>0?0:o-u),m=0;m+=d*s.leftPad.length;for(var f=0;f<c;++f)m+=e[p+f].length;m+=l*s.rightPad.length,m+=(d+l+c-1)*s.separator.length,n[a+o]=new Uint8Array(m);var h=n[a+o],b=0,g=function(e){return e.forEach((function(e){return h[b++]=e}))};for(f=0;f<d;++f)g(s.leftPad),g(s.separator);for(f=0;f<c-1;++f)g(e[p+f]),g(s.separator);if(c>0){g(e[p+c-1]);for(f=0;f<l;++f)g(s.separator),g(s.rightPad)}else{for(f=0;f<l-1;++f)g(s.rightPad),g(s.separator);g(s.rightPad)}},s=this,u=0;u<r;++u)o(u)},e.prototype.compute=function(e,n){var a=this,r=e.length,i=n.length;if(i>0){var o=n[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var s=1;s<i;++s){var u=n[s]>=o;if(!(u=u&&n[s]<=r))throw new Error("Invalid split value ".concat(n[s],", must be in [").concat(o,", ").concat(r,"]"));o=n[s]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var d=i-1,l=t.util.getArrayFromDType("int32",i);if(0===r||0===i){var c=new Array(r);for(s=0;s<=d;++s)l[s]=0;return[c,l]}l[0]=0;var p=function(e){var t=n[e]-n[e-1],r=0;m.nGramWidths.forEach((function(e){r+=a.getNumNGrams(t,e)})),m.preserveShort&&t>0&&0===r&&(r=1),l[e]=l[e-1]+r},m=this;for(s=1;s<=d;++s)p(s);var f=new Array(l[d]),h=function(t){var r=n[t],i=l[t];if(b.nGramWidths.forEach((function(o){var s=n[t+1]-n[t],u=a.getNumNGrams(s,o);a.createNGrams(e,r,f,i,u,o),i+=u})),b.preserveShort&&i===l[t]){var o=n[t+1]-n[t];if(0===o)return"continue";var s=o+2*b.padWidth;b.createNGrams(e,r,f,i,1,s)}},b=this;for(s=0;s<d;++s)h(s);return[f,l]},e}();function ae(e,t,n,a){if(e.length)if(0!==t.length)if(1!==t.length){var r=0;for(u=0;u<e.length+1;u++)if(u===e.length||-1!==t.indexOf(e[u])){s=e.subarray(r,u);n&&0===s.length||a.push(s),r=u+1}}else{for(var i=t[0],o=e.indexOf(i);-1!==o;){var s=e.subarray(0,o);n&&0===s.length||a.push(s),o=(e=e.subarray(o+1)).indexOf(i)}n&&0===e.length||a.push(e)}else for(var u=0;u<e.length;++u)a.push(e.subarray(u,u+1))}function re(e){var n=e.inputs.x,a=e.attrs,r=a.begin,i=a.size,o=e.backend,s=f(t.slice_util.parseSliceParams(n,r,i),2),u=s[0],d=s[1],l=t.slice_util.isSliceContinous(n.shape,u,d),c=o.readSync(n.dataId),p=o.makeOutput(d,n.dtype),m=t.util.computeStrides(n.shape),h=o.dataIdMap.get(p.dataId);if(l){var b=t.slice_util.computeFlatOffset(u,m);if("string"===n.dtype)h.stringBytes=c.slice(b,b+t.util.sizeFromShape(d));else o.typedArrayFromHeap(p).set(c.subarray(b,b+t.util.sizeFromShape(d)));return p}if("string"===n.dtype){var g=te(c,u,d,n.shape,n.dtype);return h.stringBytes=g,p}var _=o.typedArrayFromHeap(p),y=n.shape.length;if(2===y)!function(e,t,n,a,r){for(var i=0,o=a[0],s=a[1],u=o+r[0],d=o;d<u;d++){var l=d*t+s;n.set(e.subarray(l,l+r[1]),i),i+=r[1]}}(c,m[0],_,u,d);else if(3===y)!function(e,t,n,a,r,i){for(var o=0,s=r[0],u=r[1],d=r[2],l=s+i[0],c=u+i[1],p=s;p<l;p++)for(var m=u;m<c;m++){var f=p*t+m*n+d;a.set(e.subarray(f,f+i[2]),o),o+=i[2]}}(c,m[0],m[1],_,u,d);else if(4===y)!function(e,t,n,a,r,i,o){for(var s=0,u=i[0],d=i[1],l=i[2],c=u+o[0],p=d+o[1],m=l+o[2],f=i[3],h=u;h<c;h++)for(var b=d;b<p;b++)for(var g=l;g<m;g++){var _=h*t+b*n+g*a+f;r.set(e.subarray(_,_+o[3]),s),s+=o[3]}}(c,m[0],m[1],m[2],_,u,d);else{g=te(c,u,d,n.shape,n.dtype);_.set(g)}return p}var ie={kernelName:t.Slice,backendName:"wasm",kernelFunc:re};var oe,se={kernelName:t.BatchToSpaceND,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.blockShape,s=r.crops,u=o.reduce((function(e,t){return e*t})),d=t.backend_util.getReshaped(i.shape,o,u),l=t.backend_util.getPermuted(d.length,o.length),c=t.backend_util.getReshapedPermuted(i.shape,o,u),p=t.backend_util.getSliceBeginCoords(s,o.length),m=t.backend_util.getSliceSize(c,s,o.length),f=X({inputs:{x:i},backend:a,attrs:{shape:d}}),h=E({inputs:{x:f},backend:a,attrs:{perm:l}}),b=X({inputs:{x:h},backend:a,attrs:{shape:c}}),g=re({inputs:{x:b},backend:a,attrs:{begin:p,size:m}});return a.disposeData(f.dataId),a.disposeData(h.dataId),a.disposeData(b.dataId),g}};var ue={kernelName:t.Bincount,backendName:"wasm",setupFunc:function(e){oe=e.wasm.cwrap(t.Bincount,null,["number","number","boolean","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,a=e.attrs,r=n.x,i=n.weights,o=a.size,u=0!==i.shape.reduce((function(e,t){return e*t}),1),d=1===r.shape.length?[o]:[r.shape[0],o],l=t.makeOutput(d,i.dtype);function c(e){return t.dataIdMap.get(e.dataId).id}return oe(c(r),o,u,c(i),s[i.dtype],c(l)),l}},de=k(t.BitwiseAnd);var le={kernelName:t.BroadcastArgs,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=n.s0,i=n.s1,o=a.typedArrayFromHeap(r),s=a.typedArrayFromHeap(i),u=t.backend_util.assertAndGetBroadcastShape(Array.from(o),Array.from(s));return a.makeOutput([u.length],"int32",void 0,new Int32Array(u))}};function ce(e){var t=e.inputs.x,n=e.attrs.dtype,a=e.backend,r=a.makeOutput(t.shape,n),i=a.typedArrayFromHeap(t);return a.typedArrayFromHeap(r).set(i),r}var pe,me={kernelName:t.Cast,backendName:"wasm",kernelFunc:ce},fe=g(t.Ceil);var he={kernelName:t.ClipByValue,backendName:"wasm",setupFunc:function(e){pe=e.wasm.cwrap(t.ClipByValue,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.clipValueMin,o=a.clipValueMax,s=n.dataIdMap.get(r.dataId).id,u=n.makeOutput(r.shape,r.dtype),d=n.dataIdMap.get(u.dataId).id;return pe(s,i,o,d),u}};function be(e){var n=e.inputs,a=e.backend,r=t.util.parseAxisParam(e.attrs.axis,n[0].shape)[0],i=n.map((function(e){return e.shape}));t.backend_util.assertParamsConsistent(i,r);var o=t.backend_util.computeOutShape(n.map((function(e){return e.shape})),r),s=n.filter((function(e){return t.util.sizeFromShape(e.shape)>0}));if(1===s.length)return M({inputs:{x:s[0]},backend:a});var u=a.makeOutput(o,n[0].dtype);if(0===t.util.sizeFromShape(o))return u;if("string"===s[0].dtype){var d=s.map((function(e){var n=t.util.sizeFromShape(e.shape.slice(r));return X({inputs:{x:e},backend:a,attrs:{shape:[-1,n]}})})),l=d.map((function(e){return{vals:a.readSync(e.dataId),shape:e.shape}}));o=t.backend_util.computeOutShape(d.map((function(e){return e.shape})),1);var c=1===d[0].shape[0],p=function(e,n,a,r){var i=t.util.getArrayFromDType(a,t.util.sizeFromShape(n));if(r&&"string"!==a){var o=0;e.forEach((function(e){var n=t.util.sizeFromShape(e.shape);i.set(e.vals,o),o+=n}))}else{var s=0;e.forEach((function(e){for(var r="string"===a?t.backend_util.fromUint8ToStringArray(e.vals):e.vals,o=0,u=0;u<e.shape[0];++u)for(var d=u*n[1]+s,l=0;l<e.shape[1];++l)i[d+l]=r[o++];s+=e.shape[1]}))}return i}(l,o,n[0].dtype,c),m=t.backend_util.computeOutShape(s.map((function(e){return e.shape})),r);return u.shape=m,a.dataIdMap.get(u.dataId).stringBytes=t.backend_util.fromStringArrayToUint8(p),d.forEach((function(e){return a.disposeData(e.dataId)})),u}for(var f=t.util.sizeFromShape(s[0].shape.slice(0,r)),h=0,b=s.map((function(e){var n=t.util.sizeFromShape(e.shape.slice(r));return h+=n,n})),g=s.map((function(e){return a.typedArrayFromHeap(e)})),_=a.typedArrayFromHeap(u),y=0;y<f;y++)for(var v=y*h,k=0;k<g.length;k++){var w=b[k],I=y*w,S=g[k].subarray(I,I+w);_.set(S,v),v+=w}return u}var ge,_e={kernelName:t.Concat,backendName:"wasm",kernelFunc:be};var ye,ve={kernelName:t.Conv2D,backendName:"wasm",setupFunc:function(e){ge=e.wasm.cwrap(t.Conv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.attrs,r=e.backend,i=n.x,o=n.filter,s=r.dataIdMap.get(i.dataId).id,u=r.dataIdMap.get(o.dataId).id,d=a.strides,l=a.dilations,c=a.pad,p=a.dimRoundingMode,m=a.dataFormat,f=t.backend_util.convertConv2DDataFormat(m),h=t.backend_util.computeConv2DInfo(i.shape,o.shape,d,l,c,p,!1,f),b=h.filterHeight,g=h.filterWidth,_=h.padInfo.top,y=h.padInfo.right,v=h.padInfo.bottom,k=h.padInfo.left,w=h.dilationHeight,I=h.dilationWidth,S=h.strideHeight,M=h.strideWidth,A=h.inChannels,F=h.outChannels,E="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'"+"".concat(h.dataFormat,"'. Please use 'channelsLast'."));var T=r.makeOutput(h.outShape,"float32"),x=r.dataIdMap.get(T.dataId).id;return ge(s,i.shape[0],i.shape[1],i.shape[2],u,b,g,_,y,v,k,E,w,I,S,M,A,F,x),T}};var ke,we={kernelName:t.Conv2DBackpropInput,backendName:"wasm",setupFunc:function(e){ye=e.wasm.cwrap(t.Conv2DBackpropInput,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=a.dy,o=a.filter,s=r.strides,u=r.pad,d=r.dataFormat,l=r.dimRoundingMode,c=r.inputShape,p=t.backend_util.convertConv2DDataFormat(d),m=t.backend_util.computeConv2DInfo(c,o.shape,s,1,u,l,!1,p),h=m.batchSize,b=m.filterHeight,g=m.filterWidth,_=m.inChannels,y=m.inHeight,v=m.inWidth,k=m.outChannels,w=m.outHeight,I=m.outWidth,S=m.strideHeight,M=m.strideWidth,A=b-1-m.padInfo.top,F=g-1-m.padInfo.left,E="channelsLast"===m.dataFormat,T=t.util.computeStrides(m.inShape),x=t.util.computeStrides(i.shape),D=f(t.util.computeStrides(o.shape),3),N=D[0],C=D[1],R=D[2],P=T[0],O=E?T[1]:T[2],L=E?T[2]:1,W=E?1:T[1],U=x[0],B=E?x[1]:x[2],z=E?x[2]:1,G=E?1:x[1],H=n.makeOutput(m.inShape,"float32"),j=n.dataIdMap.get(H.dataId).id,V=n.dataIdMap.get(i.dataId).id,q=n.dataIdMap.get(o.dataId).id;return ye(V,q,h,b,g,y,v,_,w,I,k,S,M,A,F,N,C,R,P,O,L,W,U,B,z,G,j),H}};var Ie,Se={kernelName:t.Conv3D,backendName:"wasm",setupFunc:function(e){ke=e.wasm.cwrap(t.Conv3D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=r.strides,u=r.pad,d=r.dilations;if("float32"!==i.dtype)throw new Error("Tensor x must have dtype float32, got ".concat(i.dtype));if("float32"!==o.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(o.dtype));var l=t.backend_util.computeConv3DInfo(i.shape,o.shape,s,d,u),c=a.makeOutput(l.outShape,i.dtype);return ke(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(o.dataId).id,a.dataIdMap.get(c.dataId).id,l.batchSize,l.inDepth,l.inHeight,l.inWidth,l.inChannels,l.outDepth,l.outHeight,l.outWidth,l.outChannels,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.filterDepth,l.filterHeight,l.filterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),c}};var Me,Ae={kernelName:t.Conv3DBackpropFilterV2,backendName:"wasm",setupFunc:function(e){Ie=e.wasm.cwrap(t.Conv3DBackpropFilterV2,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.dy,s=r.strides,u=r.pad,d=r.filterShape;if("float32"!==i.dtype)throw new Error("Tensor dy must have dtype float32, got ".concat(i.dtype));if("float32"!==o.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(o.dtype));var l=t.backend_util.computeConv3DInfo(i.shape,d,s,1,u),c=a.makeOutput(l.filterShape,o.dtype);return Ie(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(o.dataId).id,a.dataIdMap.get(c.dataId).id,l.batchSize,l.inDepth,l.inHeight,l.inWidth,l.inChannels,l.outDepth,l.outHeight,l.outWidth,l.outChannels,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.filterDepth,l.filterHeight,l.filterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),c}};var Fe,Ee,Te={kernelName:t.Conv3DBackpropInputV2,backendName:"wasm",setupFunc:function(e){Me=e.wasm.cwrap(t.Conv3DBackpropInputV2,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.filter,s=r.pad,u=r.strides,d=r.inputShape;if("float32"!==i.dtype)throw new Error("Tensor dy must have dtype float32, got ".concat(i.dtype));if("float32"!==o.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(o.dtype));var l=t.backend_util.computeConv3DInfo(d,o.shape,u,1,s),c=a.makeOutput(l.inShape,i.dtype);return Me(a.dataIdMap.get(o.dataId).id,a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(c.dataId).id,l.batchSize,l.inDepth,l.inHeight,l.inWidth,l.inChannels,l.outDepth,l.outHeight,l.outWidth,l.outChannels,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.filterDepth,l.filterHeight,l.filterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),c}},xe=g(t.Cos),De=g(t.Cosh);!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(Fe||(Fe={}));var Ne,Ce={kernelName:t.CropAndResize,backendName:"wasm",setupFunc:function(e){Ee=e.wasm.cwrap(t.CropAndResize,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,a=e.inputs,r=e.attrs,i=r.method,o=r.extrapolationValue,s=r.cropSize,u=a.image,d=a.boxes,l=a.boxInd,c=d.shape[0],p=f(s,2),m=p[0],h=p[1],b=[c,m,h,u.shape[3]],g=n.dataIdMap.get(u.dataId);"float32"!==u.dtype&&(t=ce({backend:n,inputs:{x:u},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(t.dataId));var _=g.id,y=n.dataIdMap.get(d.dataId).id,v=n.dataIdMap.get(l.dataId).id,k=n.makeOutput(b,"float32"),w=n.dataIdMap.get(k.dataId).id,I=new Uint8Array(new Int32Array(u.shape).buffer);return Ee(_,y,v,c,I,m,h,Fe[i],o,w),null!=t&&n.disposeData(t.dataId),k}};var Re,Pe={kernelName:t.Cumprod,backendName:"wasm",setupFunc:function(e){Ne=e.wasm.cwrap(t.Cumprod,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.axis,u=r.exclusive,d=r.reverse,l=i.shape.length;t.util.assert("float32"===i.dtype||"int32"===i.dtype,(function(){return"cumprod does not support ".concat(i.dtype," tensors in the WASM backend")}));var c=t.backend_util.getAxesPermutation([o],l),p=i;null!==c&&(p=E({inputs:{x:i},attrs:{perm:c},backend:a}));var m=t.backend_util.getInnerMostAxes(1,l)[0];t.backend_util.assertAxesAreInnerMostDims("cumprod",[m],l);var f=a.makeOutput(p.shape,p.dtype),h=p.shape[m],b=a.dataIdMap.get(p.dataId).id,g=a.dataIdMap.get(f.dataId).id;Ne(b,u?1:0,d?1:0,h,g,s[i.dtype]);var _=f;return null!==c&&(_=E({inputs:{x:f},attrs:{perm:t.backend_util.getUndoAxesPermutation(c)},backend:a}),a.disposeData(p.dataId),a.disposeData(f.dataId)),_}};var Oe,Le={kernelName:t.Cumsum,backendName:"wasm",setupFunc:function(e){Re=e.wasm.cwrap(t.Cumsum,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.axis,u=r.exclusive,d=r.reverse,l=i.shape.length;t.util.assert("float32"===i.dtype||"int32"===i.dtype,(function(){return"cumsum does not support ".concat(i.dtype," tensors in the WASM backend")}));var c=t.backend_util.getAxesPermutation([o],l),p=i;null!==c&&(p=E({inputs:{x:i},attrs:{perm:c},backend:a}));var m=t.backend_util.getInnerMostAxes(1,l)[0];t.backend_util.assertAxesAreInnerMostDims("cumsum",[m],l);var f=a.makeOutput(p.shape,p.dtype),h=p.shape[m],b=a.dataIdMap.get(p.dataId).id,g=a.dataIdMap.get(f.dataId).id;Re(b,u?1:0,d?1:0,h,g,s[i.dtype]);var _=f;return null!==c&&(_=E({inputs:{x:f},attrs:{perm:t.backend_util.getUndoAxesPermutation(c)},backend:a}),a.disposeData(p.dataId),a.disposeData(f.dataId)),_}};var We,Ue={kernelName:t.DenseBincount,backendName:"wasm",setupFunc:function(e){Oe=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,a=e.attrs,r=n.x,i=n.weights,o=a.size,u=a.binaryOutput,d=0!==i.shape.reduce((function(e,t){return e*t}),1),l=1===r.shape.length?[o]:[r.shape[0],o],c=t.makeOutput(l,i.dtype);function p(e){return t.dataIdMap.get(e.dataId).id}return Oe(p(r),new Uint8Array(new Int32Array(r.shape).buffer),r.shape.length,o,d,p(i),s[i.dtype],u,p(c)),c}};var Be,ze={kernelName:t.DepthToSpace,backendName:"wasm",setupFunc:function(e){We=e.wasm.cwrap(t.DepthToSpace,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=a.x,o=r.blockSize,s=r.dataFormat,u=i.shape[0],d=("NHWC"===s?i.shape[1]:i.shape[2])*o,l=("NHWC"===s?i.shape[2]:i.shape[3])*o,c=("NHWC"===s?i.shape[3]:i.shape[1])/(o*o),p="NHWC"===s?[u,d,l,c]:[u,c,d,l],m=n.makeOutput(p,"float32"),f=n.dataIdMap.get(i.dataId).id,h=new Uint8Array(new Int32Array(t.util.computeStrides(i.shape)).buffer),b=new Uint8Array(new Int32Array(p).buffer),g=new Uint8Array(new Int32Array(t.util.computeStrides(p)).buffer),_=n.dataIdMap.get(m.dataId).id;return We(f,o,"NHWC"===s?1:0,h,i.shape.length-1,b,g,p.length,_),m}};var Ge,He={kernelName:t.DepthwiseConv2dNative,backendName:"wasm",setupFunc:function(e){Be=e.wasm.cwrap(t.DepthwiseConv2dNative,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.attrs,r=e.backend,i=n.x,o=n.filter,s=r.dataIdMap.get(i.dataId).id,u=r.dataIdMap.get(o.dataId).id,d=a.strides,l=a.dilations,c=a.pad,p=a.dimRoundingMode,m=null==l?[1,1]:l,f=t.backend_util.computeConv2DInfo(i.shape,o.shape,d,m,c,p,!0),h=f.filterHeight,b=f.filterWidth,g=f.padInfo.top,_=f.padInfo.right,y=f.padInfo.bottom,v=f.padInfo.left,k=f.dilationHeight,w=f.dilationWidth,I=f.strideHeight,S=f.strideWidth,M=f.inChannels,A=f.outChannels,F="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'"+"".concat(f.dataFormat,"'. Please use 'channelsLast'."));var E=r.makeOutput(f.outShape,"float32"),T=r.dataIdMap.get(E.dataId).id;return Be(s,i.shape[0],i.shape[1],i.shape[2],u,h,b,g,_,y,v,F,k,w,I,S,M,A,T),E}};var je,Ve={kernelName:t.Diag,backendName:"wasm",setupFunc:function(e){Ge=e.wasm.cwrap("Diag",null,["number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=n.x,i=t.util.sizeFromShape(r.shape),o=a.makeOutput(h(h([],f(r.shape),!1),f(r.shape),!1),r.dtype);return Ge(a.dataIdMap.get(r.dataId).id,s[r.dtype],i,a.dataIdMap.get(o.dataId).id),o}};var qe,Ye={kernelName:t.Dilation2D,backendName:"wasm",setupFunc:function(e){je=e.wasm.cwrap(t.Dilation2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,u=r.strides,d=r.pad,l=r.dilations;if(i.dtype!==o.dtype)throw new Error("Dilation2D error: x must have the same dtype as filter. Got ".concat(i.dtype," and ").concat(o.dtype));var c=t.backend_util.computeDilation2DInfo(i.shape,o.shape,u,d,"NHWC",l),p=a.makeOutput(c.outShape,i.dtype);return je(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(o.dataId).id,a.dataIdMap.get(p.dataId).id,s[i.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),p}};var Je,Ke={kernelName:t.Dilation2DBackpropFilter,backendName:"wasm",setupFunc:function(e){qe=e.wasm.cwrap(t.Dilation2DBackpropFilter,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,u=n.dy,d=r.strides,l=r.pad,c=r.dilations;if(i.dtype!==o.dtype||i.dtype!==u.dtype)throw new Error("Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ".concat(i.dtype,", ").concat(o.dtype,", and ").concat(u.dtype));var p=t.backend_util.computeDilation2DInfo(i.shape,o.shape,d,l,"NHWC",c),m=a.makeOutput(o.shape,o.dtype);return qe(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(o.dataId).id,a.dataIdMap.get(u.dataId).id,a.dataIdMap.get(m.dataId).id,s[i.dtype],p.batchSize,p.inChannels,p.inHeight,p.inWidth,p.outHeight,p.outWidth,p.strideHeight,p.strideWidth,p.dilationHeight,p.dilationWidth,p.filterHeight,p.filterWidth,p.padInfo.top,p.padInfo.left),m}};var Qe,Xe={kernelName:t.Dilation2DBackpropInput,backendName:"wasm",setupFunc:function(e){Je=e.wasm.cwrap(t.Dilation2DBackpropInput,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,u=n.dy,d=r.strides,l=r.pad,c=r.dilations;if(i.dtype!==o.dtype||i.dtype!==u.dtype)throw new Error("Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ".concat(i.dtype,", ").concat(o.dtype,", and ").concat(u.dtype));var p=t.backend_util.computeDilation2DInfo(i.shape,o.shape,d,l,"NHWC",c),m=a.makeOutput(i.shape,i.dtype);return Je(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(o.dataId).id,a.dataIdMap.get(u.dataId).id,a.dataIdMap.get(m.dataId).id,s[i.dtype],p.batchSize,p.inChannels,p.inHeight,p.inWidth,p.outHeight,p.outWidth,p.strideHeight,p.strideWidth,p.dilationHeight,p.dilationWidth,p.filterHeight,p.filterWidth,p.padInfo.top,p.padInfo.left),m}},Ze=g(t.Elu);var $e={kernelName:t.EluGrad,backendName:"wasm",setupFunc:function(e){Qe=e.wasm.cwrap(t.EluGrad,null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.dy,r=t.y,i=n.makeOutput(r.shape,"float32"),o=function(e){return n.dataIdMap.get(e.dataId).id};return Qe(o(r),o(a),o(i)),i}},et=k(t.Equal,0,"bool"),tt=g(t.Erf),nt=g(t.Exp,"float32");function at(e){var n=e.inputs,a=e.attrs,r=e.backend,i=n.input,o=a.dim,s=i.shape.length,u=i.shape.slice(),d=o;return o<0&&(t.util.assert(-(s+1)<=o,(function(){return"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")})),d=s+o+1),u.splice(d,0,1),X({inputs:{x:i},backend:r,attrs:{shape:u}})}var rt={kernelName:t.ExpandDims,backendName:"wasm",kernelFunc:at},it=g(t.Expm1,"float32");function ot(e){var n=e.attrs,a=n.shape,r=n.value,i=e.backend,o=e.attrs.dtype;o=o||t.util.inferDtype(r);var s=i.makeOutput(a,o);return i.typedArrayFromHeap(s).fill(r),s}var st,ut={kernelName:t.Fill,backendName:"wasm",kernelFunc:ot};var dt,lt={kernelName:t.FlipLeftRight,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.image,r=n.makeOutput(a.shape,a.dtype),i=n.dataIdMap.get(a.dataId).id,o=n.dataIdMap.get(r.dataId).id,s=f(a.shape,4),u=s[0],d=s[1],l=s[2],c=s[3];return st(i,u,d,l,c,o),r},setupFunc:function(e){st=e.wasm.cwrap(t.FlipLeftRight,null,["number","number","number","number","number","number"])}},ct=g(t.Floor),pt=k(t.FloorDiv);var mt,ft={kernelName:t.FusedBatchNorm,backendName:"wasm",setupFunc:function(e){dt=e.wasm.cwrap(t.FusedBatchNorm,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs.varianceEpsilon,i=a.x,o=a.mean,s=a.variance,u=a.offset,d=a.scale,l=n.dataIdMap.get(i.dataId).id,c=n.dataIdMap.get(o.dataId).id,p=n.dataIdMap.get(s.dataId).id,m=null!=u?n.dataIdMap.get(u.dataId).id:0,f=null!=d?n.dataIdMap.get(d.dataId).id:0,h=n.makeOutput(i.shape,i.dtype);if(0===t.util.sizeFromShape(i.shape))return h;var b=n.dataIdMap.get(h.dataId).id;return dt(l,c,p,m,f,r,b),h}};var ht,bt={kernelName:t.FusedConv2D,backendName:"wasm",setupFunc:function(e){mt=e.wasm.cwrap(t.FusedConv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.attrs,r=e.backend,i=n.x,o=n.filter,s=n.bias,d=n.preluActivationWeights,l=a.strides,c=a.pad,p=a.dilations,m=a.dataFormat,f=a.dimRoundingMode,h=a.activation,b=a.leakyreluAlpha,g=t.backend_util.computeConv2DInfo(i.shape,o.shape,l,p,c,f),_=u[h];if(null==_)throw new Error("".concat(h," activation not yet supported for FusedConv2D ")+"in the wasm backend.");var y=r.dataIdMap.get(i.dataId).id,v=r.dataIdMap.get(o.dataId).id,k=g.outChannels,w=0;if(null!=s){var I=r.dataIdMap.get(s.dataId);if(1!==I.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got "+"rank ".concat(I.shape.length,"."));if(I.shape[0]!==k)throw new Error("FusedConv2D bias shape (".concat(I.shape,") does not ")+"match the number of output channels (".concat(k,")"));w=I.id}var S=g.filterHeight,M=g.filterWidth,A=g.padInfo.top,F=g.padInfo.right,E=g.padInfo.bottom,T=g.padInfo.left,x=g.dilationHeight,D=g.dilationWidth,N=g.strideHeight,C=g.strideWidth,R=g.inChannels,P="SAME"===g.padInfo.type?1:0,O=g.batchSize,L=g.inHeight,W=g.inWidth;if("NHWC"!==m)throw new Error("wasm backend FusedConv2D does not support dataFormat:'"+"".concat(m,"'. Please use 'NHWC'."));var U=r.makeOutput(g.outShape,"float32"),B=r.dataIdMap.get(U.dataId).id,z=null==d?0:r.dataIdMap.get(d.dataId).id;return mt(y,O,L,W,v,S,M,w,A,F,E,T,P,x,D,N,C,R,k,_,z,b||0,B),U}};var gt,_t={kernelName:t.FusedDepthwiseConv2D,backendName:"wasm",setupFunc:function(e){ht=e.wasm.cwrap(t.FusedDepthwiseConv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.attrs,r=e.backend,i=n.x,o=n.filter,s=n.bias,d=n.preluActivationWeights,l=a.strides,c=a.pad,p=a.dilations,m=a.dataFormat,f=a.dimRoundingMode,h=a.activation,b=a.leakyreluAlpha,g=t.backend_util.computeConv2DInfo(i.shape,o.shape,l,p,c,f,!0),_=u[h];if(null==_)throw new Error("".concat(h," activation not yet supported for FusedDepthwiseConv2D ")+"in the wasm backend.");var y=r.dataIdMap.get(i.dataId).id,v=r.dataIdMap.get(o.dataId).id,k=g.outChannels,w=0;if(null!=s){var I=r.dataIdMap.get(s.dataId);if(1!==I.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got "+"rank ".concat(I.shape.length,"."));if(I.shape[0]!==k)throw new Error("FusedDepthwiseConv2D bias shape (".concat(I.shape,") does not ")+"match the number of output channels (".concat(k,")"));w=I.id}var S=g.filterHeight,M=g.filterWidth,A=g.padInfo.top,F=g.padInfo.right,E=g.padInfo.bottom,T=g.padInfo.left,x=g.dilationHeight,D=g.dilationWidth,N=g.strideHeight,C=g.strideWidth,R=g.inChannels,P="SAME"===g.padInfo.type?1:0,O=g.batchSize,L=g.inHeight,W=g.inWidth;if("NHWC"!==m)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'"+"".concat(m,"'. Please use 'NHWC'."));var U=r.makeOutput(g.outShape,"float32"),B=r.dataIdMap.get(U.dataId).id,z=null==d?0:r.dataIdMap.get(d.dataId).id;return ht(y,O,L,W,v,S,M,w,A,F,E,T,P,x,D,N,C,R,k,_,z,b||0,B),U}};var yt,vt={kernelName:t.GatherNd,backendName:"wasm",setupFunc:function(e){gt=e.wasm.cwrap(t.GatherNd,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=a.params,i=a.indices,o=f(t.gather_util.prepareAndValidate(r,i),4),u=o[0],d=o[1],l=o[2],c=o[3],p=n.makeOutput(u,r.dtype);if(0===d)return p;var m=i.shape,h=m[m.length-1],b=n.dataIdMap.get(r.dataId).id,g=n.dataIdMap.get(i.dataId).id,_=new Uint8Array(new Int32Array(c).buffer),y=n.dataIdMap.get(p.dataId).id;return gt(b,s[r.dtype],g,d,h,l,_,y),p}};var kt,wt={kernelName:t.GatherV2,backendName:"wasm",setupFunc:function(e){yt=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){for(var n=e.backend,a=e.inputs,r=e.attrs,i=a.x,o=a.indices,u=r.axis,d=r.batchDims,l=t.util.parseAxisParam(u,i.shape)[0],c=n.readSync(o.dataId),p=i.shape[l],m=function(e){var n=c[e];t.util.assert(n<=p-1&&n>=0,(function(){return"GatherV2: the index value ".concat(n," is not in [0, ").concat(p-1,"]")}))},f=0;f<c.length;++f)m(f);var h=t.backend_util.segment_util.collectGatherOpShapeInfo(i,o,l,d),b=X({inputs:{x:i},attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]},backend:n}),g=t.util.sizeFromShape(o.shape),_=X({inputs:{x:o},attrs:{shape:[h.batchSize,g/h.batchSize]},backend:n}),y=[h.batchSize,h.outerSize,g/h.batchSize,h.sliceSize],v=n.makeOutput(y,i.dtype);if(0===t.util.sizeFromShape(i.shape))return v;var k=b.shape.length-1,w=n.dataIdMap.get(b.dataId).id,I=n.dataIdMap.get(_.dataId).id,S=n.dataIdMap.get(v.dataId).id,M=new Uint8Array(new Int32Array(t.util.computeStrides(b.shape)).buffer),A=new Uint8Array(new Int32Array(t.util.computeStrides(y)).buffer);return yt(w,s[i.dtype],M,k,I,h.batchSize,A,S),n.disposeData(b.dataId),n.disposeData(_.dataId),v.shape=h.outputShape,v}},It=k(t.Greater,0,"bool"),St=k(t.GreaterEqual,0,"bool"),Mt=g(t.IsFinite,"bool"),At=g(t.IsInf,"bool"),Ft=g(t.IsNan,"bool");var Et,Tt={kernelName:t.LeakyRelu,backendName:"wasm",setupFunc:function(e){kt=e.wasm.cwrap(t.LeakyRelu,null,["number","number","number","number"])},kernelFunc:function(e){var n=e.inputs.x,a=e.attrs.alpha,r=e.backend,i=r.dataIdMap.get(n.dataId).id,o=r.makeOutput(n.shape,"float32");if(0!==t.util.sizeFromShape(n.shape)){var u=r.dataIdMap.get(o.dataId).id;kt(i,s[n.dtype],a,u)}return o}},xt=k(t.Less,0,"bool"),Dt=k(t.LessEqual,0,"bool");var Nt,Ct={kernelName:t.LinSpace,backendName:"wasm",setupFunc:function(e){Et=e.wasm.cwrap(t.LinSpace,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.attrs,n=e.backend,a=t.start,r=t.stop,i=t.num,o=Math.floor(i),s=n.makeOutput([o],"float32");return Et(n.dataIdMap.get(s.dataId).id,a,r,o),s}},Rt=g(t.Log),Pt=g(t.Log1p),Ot=k(t.LogicalAnd,0,"bool"),Lt=g(t.LogicalNot),Wt=k(t.LogicalOr,0,"bool"),Ut=k(t.LogicalXor,0,"bool");var Bt,zt={kernelName:t.LRN,backendName:"wasm",setupFunc:function(e){Nt=e.wasm.cwrap(t.LRN,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.depthRadius,o=a.bias,s=a.alpha,u=a.beta;if("float32"!==r.dtype)throw new Error("LRN error: x must have dtype float32");var d=n.makeOutput(r.shape,r.dtype);return Nt(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(d.dataId).id,r.shape[3],i,o,s,u),d}};var Gt,Ht={kernelName:t.LRNGrad,backendName:"wasm",setupFunc:function(e){Bt=e.wasm.cwrap(t.LRNGrad,null,["number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.y,o=t.dy,s=a.depthRadius,u=a.bias,d=a.alpha,l=a.beta;if("float32"!==r.dtype||"float32"!==i.dtype||"float32"!==o.dtype)throw new Error("LRNGrad error: x, y, and dy must have dtype float32");var c=n.makeOutput(r.shape,r.dtype);return Bt(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(c.dataId).id,o.shape[3],s,u,d,l),c}};var jt,Vt={kernelName:t.Max,backendName:"wasm",setupFunc:function(e){Gt=e.wasm.cwrap(t.Max,null,["number","number","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=r.reductionIndices,o=r.keepDims,u=a.x,d=n.dataIdMap.get(u.dataId).id,l=u,c=D(u,i,n),p=c.transposed,m=c.axes,h=c.originalAxes,b=c.inputWasTransposed;b&&(l=p,d=n.dataIdMap.get(p.dataId).id);var g=l.shape.length;t.backend_util.assertAxesAreInnerMostDims("max",m,g);var _=f(t.backend_util.computeOutAndReduceShapes(l.shape,m),2),y=_[0],v=_[1],k=t.util.sizeFromShape(v),w=n.makeOutput(y,u.dtype);if(0!==t.util.sizeFromShape(l.shape)){var I=n.dataIdMap.get(w.dataId).id;Gt(d,s[u.dtype],k,I)}if(b&&n.disposeData(p.dataId),o){var S=t.backend_util.expandShapeToKeepDim(w.shape,h);w.shape=S}return w}},qt=k(t.Maximum);var Yt,Jt={kernelName:t.MaxPool,backendName:"wasm",setupFunc:function(e){jt=e.wasm.cwrap(t.MaxPool,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.attrs,r=e.backend,i=n.x,o=r.dataIdMap.get(i.dataId).id;t.util.assert("float32"===i.dtype,(function(){return"Error in MaxPool: only float32 input is supported. Got ".concat(i.dtype,".")}));var s=a.filterSize,u=a.strides,d=a.pad,l=a.dimRoundingMode,c=t.backend_util.computePool2DInfo(i.shape,s,u,1,d,l),p=c.filterHeight,m=c.filterWidth,f=c.padInfo.top,h=c.padInfo.right,b=c.padInfo.bottom,g=c.padInfo.left,_=c.dilationHeight,y=c.dilationWidth,v=c.strideHeight,k=c.strideWidth,w=c.inChannels,I=c.outChannels;if("channelsLast"!==c.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(c.dataFormat,"'. Please use 'channelsLast'."));var S=r.makeOutput(c.outShape,"float32"),M=r.dataIdMap.get(S.dataId).id;return jt(o,i.shape[0],i.shape[1],i.shape[2],p,m,f,h,b,g,_,y,v,k,w,I,M),S}};var Kt,Qt={kernelName:t.MaxPool3D,backendName:"wasm",setupFunc:function(e){Yt=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.filterSize,s=r.strides,u=r.pad,d=r.dimRoundingMode,l=r.dataFormat,c=t.backend_util.computePool3DInfo(i.shape,o,s,1,u,d,l),p=a.makeOutput(c.outShape,i.dtype);return Yt(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(p.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),p}};var Xt,Zt={kernelName:t.MaxPool3DGrad,backendName:"wasm",setupFunc:function(e){Kt=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.input,s=r.filterSize,u=r.strides,d=r.pad,l=r.dimRoundingMode,c=t.backend_util.computePool3DInfo(o.shape,s,u,1,d,l),p=a.makeOutput(o.shape,o.dtype);return Kt(a.dataIdMap.get(o.dataId).id,a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(p.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),p}};var $t,en={kernelName:t.MaxPoolGrad,backendName:"wasm",setupFunc:function(e){Xt=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.input,s=r.filterSize,u=r.strides,d=r.pad,l=r.dimRoundingMode,c=t.backend_util.computePool2DInfo(o.shape,s,u,1,d,l),p=a.makeOutput(o.shape,o.dtype);return Xt(a.dataIdMap.get(o.dataId).id,a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(p.dataId).id,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left),p}};var tn,nn={kernelName:t.MaxPoolWithArgmax,backendName:"wasm",setupFunc:function(e){$t=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.filterSize,u=r.strides,d=r.pad,l=r.includeBatchInIndex;t.util.assert(4===i.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(i.shape.length,".")}));var c=[1,1];t.util.assert(t.backend_util.eitherStridesOrDilationsAreOne(u,c),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(u," and dilations '").concat(c,"'")}));var p=t.backend_util.computePool2DInfo(i.shape,o,u,[1,1],d),m=a.makeOutput(p.outShape,i.dtype),f=a.makeOutput(p.outShape,"int32");return $t(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(m.dataId).id,a.dataIdMap.get(f.dataId).id,s[i.dtype],l,p.batchSize,p.inChannels,p.inHeight,p.inWidth,p.outHeight,p.outWidth,p.strideHeight,p.strideWidth,p.dilationHeight,p.dilationWidth,p.effectiveFilterHeight,p.effectiveFilterWidth,p.padInfo.top,p.padInfo.left),[m,f]}};var an,rn={kernelName:t.Mean,backendName:"wasm",setupFunc:function(e){tn=e.wasm.cwrap(t.Mean,null,["number, number, number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=r.axis,o=r.keepDims,s=a.x,u=n.dataIdMap.get(s.dataId).id,d=u,l=s,c=D(s,i,n),p=c.transposed,m=c.axes,h=c.originalAxes,b=c.inputWasTransposed,g=m;if(b){var _=n.dataIdMap.get(p.dataId).id;_!==u&&(l=p,d=_,g=t.backend_util.getInnerMostAxes(g.length,l.shape.length))}t.backend_util.assertAxesAreInnerMostDims("mean",g,l.shape.length);var y=f(t.backend_util.computeOutAndReduceShapes(l.shape,g),2),v=y[0],k=y[1],w=t.util.sizeFromShape(k),I=l;"float32"!==l.dtype&&(I=ce({backend:n,inputs:{x:l},attrs:{dtype:"float32"}}),d=n.dataIdMap.get(I.dataId).id);var S=n.makeOutput(v,"float32");if(0!==t.util.sizeFromShape(l.shape)){var M=n.dataIdMap.get(S.dataId).id;tn(d,w,M)}if(b&&n.disposeData(p.dataId),o){var A=t.backend_util.expandShapeToKeepDim(S.shape,h);S.shape=A}return"float32"!==l.dtype&&n.disposeData(I.dataId),S}};var on,sn,un={kernelName:t.Min,backendName:"wasm",setupFunc:function(e){an=e.wasm.cwrap(t.Min,null,["number","number","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=r.axis,o=r.keepDims,u=a.x,d=n.dataIdMap.get(u.dataId).id,l=d,c=u,p=D(u,i,n),m=p.transposed,h=p.axes,b=p.originalAxes,g=p.inputWasTransposed;if(g){var _=n.dataIdMap.get(m.dataId).id;_!==d&&(c=m,l=_)}var y=c.shape.length;t.backend_util.assertAxesAreInnerMostDims("min",h,y);var v=f(t.backend_util.computeOutAndReduceShapes(c.shape,h),2),k=v[0],w=v[1],I=t.util.sizeFromShape(w),S=n.makeOutput(k,c.dtype);if(0!==t.util.sizeFromShape(c.shape)){var M=n.dataIdMap.get(S.dataId).id;an(l,s[u.dtype],I,M)}if(g&&n.disposeData(m.dataId),o){var A=t.backend_util.expandShapeToKeepDim(S.shape,b);S.shape=A}return S}},dn=k(t.Minimum);!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(on||(on={}));var ln,cn={kernelName:t.MirrorPad,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,a=e.attrs,r=a.paddings,i=a.mode,o=r.map((function(e,n){return e[0]+t.shape[n]+e[1]})),u=n.dataIdMap.get(t.dataId).id,d=n.makeOutput(o,t.dtype),l=n.dataIdMap.get(d.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),p=r.map((function(e){return e[0]})),m=r.map((function(e){return e[1]})),f=new Uint8Array(new Int32Array(p).buffer),h=new Uint8Array(new Int32Array(m).buffer);return sn(u,c,t.shape.length,s[t.dtype],f,h,on[i],l),d},setupFunc:function(e){sn=e.wasm.cwrap(t.MirrorPad,null,["number","array","number","number","array","array","number","number"])}};function pn(e){var n=e.backend,a=e.inputs.logits,r=e.attrs.dim,i=n.dataIdMap.get(a.dataId).id,o=n.makeOutput(a.shape,a.dtype),s=n.dataIdMap.get(o.dataId).id,u=a.shape[r],d=t.util.sizeFromShape(a.shape)/u;return 0===t.util.sizeFromShape(o.shape)||ln(i,s,u,d),o}var mn,fn={kernelName:t.Softmax,backendName:"wasm",setupFunc:function(e){ln=e.wasm.cwrap(t.Softmax,null,["number","number","number","number"])},kernelFunc:pn};var hn,bn={kernelName:t.Multinomial,backendName:"wasm",setupFunc:function(e){mn=e.wasm.cwrap(t.Multinomial,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.logits,i=a.numSamples,o=a.seed,s=a.normalized;if("float32"!==r.dtype)throw new Error("Tensor logits must have dtype float32, got ".concat(r.dtype));var u=s?r:pn({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),d=f(u.shape,2),l=d[0],c=d[1],p=n.makeOutput([l,i],"int32");return mn(n.dataIdMap.get(u.dataId).id,l,c,i,o,n.dataIdMap.get(p.dataId).id),s||n.disposeData(u.dataId),p}},gn=k(t.Mod),_n=k(t.Multiply),yn=g(t.Neg);function vn(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),a=n[0],r=n[1],i=n[2],o=n[3];return e.wasm._free(t),{pSelectedIndices:a,selectedSize:r,pSelectedScores:i,pValidOutputs:o}}var kn,wn={kernelName:t.NonMaxSuppressionV3,backendName:"wasm",setupFunc:function(e){hn=e.wasm.cwrap(t.NonMaxSuppressionV3,"number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,a=e.attrs,r=a.iouThreshold,i=a.maxOutputSize,o=a.scoreThreshold,s=n.boxes,u=n.scores,d=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(u.dataId).id,c=vn(t,hn(d,l,i,r,o)),p=c.pSelectedIndices,m=c.selectedSize,f=c.pSelectedScores,h=c.pValidOutputs;return t.wasm._free(f),t.wasm._free(h),t.makeOutput([m],"int32",p)}};var In,Sn={kernelName:t.NonMaxSuppressionV4,backendName:"wasm",setupFunc:function(e){kn=e.wasm.cwrap(t.NonMaxSuppressionV4,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,a=e.attrs,r=a.iouThreshold,i=a.maxOutputSize,o=a.scoreThreshold,s=a.padToMaxOutputSize,u=n.boxes,d=n.scores,l=t.dataIdMap.get(u.dataId).id,c=t.dataIdMap.get(d.dataId).id,p=vn(t,kn(l,c,i,r,o,s)),m=p.pSelectedIndices,f=p.selectedSize,h=p.pSelectedScores,b=p.pValidOutputs;return t.wasm._free(h),[t.makeOutput([f],"int32",m),t.makeOutput([],"int32",b)]}};var Mn,An={kernelName:t.NonMaxSuppressionV5,backendName:"wasm",setupFunc:function(e){In=e.wasm.cwrap(t.NonMaxSuppressionV5,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,a=e.attrs,r=a.iouThreshold,i=a.maxOutputSize,o=a.scoreThreshold,s=a.softNmsSigma,u=n.boxes,d=n.scores,l=t.dataIdMap.get(u.dataId).id,c=t.dataIdMap.get(d.dataId).id,p=vn(t,In(l,c,i,r,o,s)),m=p.pSelectedIndices,f=p.selectedSize,h=p.pSelectedScores,b=p.pValidOutputs;return t.wasm._free(b),[t.makeOutput([f],"int32",m),t.makeOutput([f],"float32",h)]}},Fn=k(t.NotEqual,0,"bool");var En={kernelName:t.OneHot,backendName:"wasm",setupFunc:function(e){Mn=e.wasm.cwrap(t.OneHot,null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.indices,i=a.dtype,o=a.depth,s=a.onValue,u=a.offValue,d=n.makeOutput(h(h([],f(r.shape),!1),[o],!1),i),l=n.dataIdMap.get(d.dataId).id,c=n.dataIdMap.get(r.dataId).id;return Mn(c,o,s,u,l),d}};var Tn={kernelName:t.OnesLike,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,a=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(a).fill(1),a}};var xn,Dn={kernelName:t.Pack,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs.axis;if(1===n.length)return at({inputs:{input:n[0]},backend:a,attrs:{dim:r}});var i=n[0].shape,o=n[0].dtype;n.forEach((function(e){t.util.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),t.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var s=[],u=be({inputs:n.map((function(e){var t=at({inputs:{input:e},backend:a,attrs:{dim:r}});return s.push(t),t})),backend:a,attrs:{axis:r}});return s.forEach((function(e){return a.disposeData(e.dataId)})),u}};var Nn,Cn={kernelName:t.PadV2,backendName:"wasm",kernelFunc:function(e){var n=e.inputs.x,a=e.backend,r=e.attrs,i=r.paddings,o=r.constantValue,u=i.map((function(e,t){return e[0]+n.shape[t]+e[1]}));if(0===t.util.sizeFromShape(n.shape))return ot({backend:a,attrs:{shape:u,value:o,dtype:n.dtype}});var d=a.dataIdMap.get(n.dataId).id,l=a.makeOutput(u,n.dtype),c=a.dataIdMap.get(l.dataId).id,p=new Uint8Array(new Int32Array(n.shape).buffer),m=i.map((function(e){return e[0]})),f=i.map((function(e){return e[1]})),h=new Uint8Array(new Int32Array(m).buffer),b=new Uint8Array(new Int32Array(f).buffer);return xn(d,p,n.shape.length,s[n.dtype],h,b,o,c),l},setupFunc:function(e){xn=e.wasm.cwrap(t.PadV2,null,["number","array","number","number","array","array","number","number"])}},Rn=k(t.Pow);var Pn,On={kernelName:t.Prelu,backendName:"wasm",setupFunc:function(e){Nn=e.wasm.cwrap(t.Prelu,null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x,r=t.alpha,i=n.dataIdMap.get(a.dataId).id,o=n.dataIdMap.get(r.dataId).id,s=i,u=a,d=u;"float32"!==u.dtype&&(d=ce({backend:n,inputs:{x:a},attrs:{dtype:"float32"}}),s=n.dataIdMap.get(d.dataId).id);var l=n.makeOutput(a.shape,"float32"),c=n.dataIdMap.get(l.dataId).id;return Nn(s,o,c),"float32"!==u.dtype&&n.disposeData(d.dataId),l}};var Ln,Wn={kernelName:t.Prod,backendName:"wasm",setupFunc:function(e){Pn=e.wasm.cwrap(t.Prod,null,["number","number","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=r.axis,o=r.keepDims,u=a.x,d=n.dataIdMap.get(u.dataId).id,l=d,c=u,p=D(u,i,n),m=p.transposed,h=p.axes,b=p.originalAxes,g=p.inputWasTransposed,_=h;if(g){var y=n.dataIdMap.get(m.dataId).id;y!==d&&(c=m,l=y,_=t.backend_util.getInnerMostAxes(_.length,c.shape.length))}t.backend_util.assertAxesAreInnerMostDims("prod",_,c.shape.length);var v=f(t.backend_util.computeOutAndReduceShapes(c.shape,_),2),k=v[0],w=v[1],I=t.util.sizeFromShape(w),S=n.makeOutput(k,c.dtype);if(0!==t.util.sizeFromShape(c.shape)){var M=n.dataIdMap.get(S.dataId).id;Pn(l,I,s[S.dtype],M)}if(g&&n.disposeData(m.dataId),o){var A=t.backend_util.expandShapeToKeepDim(S.shape,b);S.shape=A}return S}},Un={kernelName:t.Range,backendName:"wasm",kernelFunc:function(e){var n=e.backend,a=e.attrs,r=a.start,i=a.stop,o=a.step,s=a.dtype,u=function(e,n,a,r){if(e===n||e<n&&a<0||n<e&&a>1)return t.util.makeZerosTypedArray(0,r);var i=Math.abs(Math.ceil((n-e)/a)),o=t.util.makeZerosTypedArray(i,r);n<e&&1===a&&(a=-1),o[0]=e;for(var s=1;s<o.length;s++)o[s]=o[s-1]+a;return o}(r,i,o,s),d=n.makeOutput([u.length],s);return n.typedArrayFromHeap(d).set(u),d}},Bn=k(t.RealDiv),zn=g(t.Reciprocal),Gn=g(t.Relu),Hn=g(t.Relu6);var jn,Vn={kernelName:t.ResizeBilinear,backendName:"wasm",setupFunc:function(e){Ln=e.wasm.cwrap(t.ResizeBilinear,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n,a=e.backend,r=e.inputs,i=e.attrs,o=r.images,s=i.alignCorners,u=i.halfPixelCenters,d=f(i.size,2),l=d[0],c=d[1],p=f(o.shape,4),m=p[0],h=p[1],b=p[2],g=p[3],_=[m,l,c,g],y=a.dataIdMap.get(o.dataId);"float32"!==y.dtype&&(n=ce({backend:a,inputs:{x:o},attrs:{dtype:"float32"}}),y=a.dataIdMap.get(n.dataId));var v=y.id,k=a.makeOutput(_,"float32");if(0===t.util.sizeFromShape(o.shape))return k;var w=a.dataIdMap.get(k.dataId).id;return Ln(v,m,h,b,g,l,c,s?1:0,u?1:0,w),null!=n&&a.disposeData(n.dataId),k}};var qn,Yn={kernelName:t.ResizeBilinearGrad,backendName:"wasm",setupFunc:function(e){jn=e.wasm.cwrap(t.ResizeBilinearGrad,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.images,o=n.dy,s=r.alignCorners,u=a.makeOutput(i.shape,"float32"),d=a.dataIdMap.get(i.dataId);return"float32"!==d.dtype&&(t=ce({backend:a,inputs:{x:i},attrs:{dtype:"float32"}}),d=a.dataIdMap.get(t.dataId)),jn(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(o.dataId).id,a.dataIdMap.get(u.dataId).id,new Uint8Array(new Int32Array(i.shape).buffer),new Uint8Array(new Int32Array(o.shape).buffer),s),null!=t&&a.disposeData(t.dataId),u}};var Jn,Kn={kernelName:t.ResizeNearestNeighbor,backendName:"wasm",setupFunc:function(e){qn=e.wasm.cwrap(t.ResizeNearestNeighbor,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=a.images,o=r.alignCorners,s=r.halfPixelCenters,u=f(r.size,2),d=u[0],l=u[1],c=f(i.shape,4),p=c[0],m=c[1],h=c[2],b=c[3],g=[p,d,l,b],_=n.makeOutput(g,"float32");if(0===t.util.sizeFromShape(i.shape))return _;var y,v=n.dataIdMap.get(i.dataId);"float32"!==v.dtype&&(y=ce({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),v=n.dataIdMap.get(y.dataId));var k=v.id,w=n.dataIdMap.get(_.dataId).id;return qn(k,p,m,h,b,d,l,o?1:0,s?1:0,w),null!=y&&n.disposeData(y.dataId),_}};var Qn,Xn={kernelName:t.ResizeNearestNeighborGrad,backendName:"wasm",setupFunc:function(e){Jn=e.wasm.cwrap(t.ResizeNearestNeighborGrad,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.images,o=n.dy,s=r.alignCorners,u=a.makeOutput(i.shape,"float32"),d=a.dataIdMap.get(i.dataId);return"float32"!==d.dtype&&(t=ce({backend:a,inputs:{x:i},attrs:{dtype:"float32"}}),d=a.dataIdMap.get(t.dataId)),Jn(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(o.dataId).id,a.dataIdMap.get(u.dataId).id,new Uint8Array(new Int32Array(i.shape).buffer),new Uint8Array(new Int32Array(o.shape).buffer),s),null!=t&&a.disposeData(t.dataId),u}};var Zn,$n={kernelName:t.Reverse,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.dims,s=t.util.parseAxisParam(o,i.shape);if(0===i.shape.length)return M({inputs:{x:i},backend:a});var u=a.makeOutput(i.shape,i.dtype),d=a.dataIdMap.get(i.dataId).id,l=a.dataIdMap.get(u.dataId).id,c=new Uint8Array(new Int32Array(s).buffer),p=new Uint8Array(new Int32Array(i.shape).buffer);Qn(d,c,s.length,p,i.shape.length,l);var m=X({inputs:{x:u},attrs:{shape:i.shape},backend:a});return a.disposeData(u.dataId),m},setupFunc:function(e){Qn=e.wasm.cwrap(t.Reverse,null,["number","array","number","array","number","number"])}};var ea,ta={kernelName:t.RotateWithOffset,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.image,o=r.radians,s=r.fillValue,u=r.center,d=a.makeOutput(i.shape,i.dtype),l=a.dataIdMap.get(i.dataId).id,c=a.dataIdMap.get(d.dataId).id,p=f(i.shape,4),m=p[0],b=p[1],g=p[2],_=p[3],y=f(t.backend_util.getImageCenter(u,b,g),2),v=y[0],k=y[1],w="number"==typeof s?[s,s,s,0===s?0:255]:h(h([],f(s),!1),[255],!1),I=new Uint8Array(new Int32Array(w).buffer);return Zn(l,m,b,g,_,o,v,k,I,w.length,c),d},setupFunc:function(e){Zn=e.wasm.cwrap(t.RotateWithOffset,null,["number","number","number","number","number","number","number","number","array","number","number"])}},na=g(t.Round),aa=g(t.Rsqrt);var ra,ia={kernelName:t.ScatterNd,backendName:"wasm",setupFunc:function(e){ea=e.wasm.cwrap(t.ScatterNd,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=a.indices,o=a.updates,u=r.shape,d=n.makeOutput(u,o.dtype);if(0===t.util.sizeFromShape(u))return d;var l=t.scatter_util.calculateShapes(o,i,u),c=l.sliceRank,p=l.numUpdates,m=l.sliceSize,f=l.strides,h=l.outputSize,b=n.dataIdMap.get(i.dataId).id,g=n.dataIdMap.get(o.dataId).id,_=new Uint8Array(new Int32Array(f).buffer),y=n.dataIdMap.get(d.dataId).id;return ea(b,g,s[o.dtype],c,p,m,_,h,y),d}};var oa,sa={kernelName:t.SearchSorted,backendName:"wasm",setupFunc:function(e){ra=e.wasm.cwrap(t.SearchSorted,null,["number","number","number","number","number","number","bool","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.sortedSequence,i=t.values,o=a.side;if(r.dtype!==i.dtype)throw new Error("SearchSorted error: sorted_sequence must have the same dtype as values. Got ".concat(r.dtype," and ").concat(i.dtype));var u=n.makeOutput(i.shape,"int32");function d(e){return n.dataIdMap.get(e.dataId).id}return ra(d(r),d(i),r.shape[0],r.shape[1],i.shape[1],s[r.dtype],"left"===o,d(u)),u}};var ua,da={kernelName:t.Select,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=n.condition,i=n.t,o=n.e,s=a.dataIdMap.get(r.dataId).id,u=a.dataIdMap.get(i.dataId).id,d=a.dataIdMap.get(o.dataId).id,l=a.makeOutput(i.shape,i.dtype),c=a.dataIdMap.get(l.dataId).id,p=r.shape.length,m=i.shape.length,f=0===p||p>1||1===m?1:t.util.sizeFromShape(i.shape.slice(1));return oa(s,u,d,f,c),l},setupFunc:function(e){oa=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},la=g(t.Selu);var ca={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){ua=e.wasm.cwrap(t.Sigmoid,null,["number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs.x,r=n.dataIdMap.get(a.dataId).id,i=n.makeOutput(a.shape,a.dtype),o=n.dataIdMap.get(i.dataId).id;return 0===t.util.sizeFromShape(i.shape)||ua(r,o),i}},pa=g(t.Sign),ma=g(t.Sin),fa=g(t.Sinh),ha=g(t.Softplus);var ba,ga={kernelName:t.SpaceToBatchND,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.blockShape,s=r.paddings,u=t.util.sizeFromShape(o),d=[[0,0]];d.push.apply(d,h([],f(s),!1));for(var l=1+o.length;l<i.shape.length;++l)d.push([0,0]);var c=Cn.kernelFunc({inputs:{x:i},backend:a,attrs:{paddings:d,constantValue:0}}),p=t.backend_util.getReshaped(c.shape,o,u,!1),m=t.backend_util.getPermuted(p.length,o.length,!1),b=t.backend_util.getReshapedPermuted(c.shape,o,u,!1),g=X({inputs:{x:c},backend:a,attrs:{shape:p}}),_=E({inputs:{x:g},backend:a,attrs:{perm:m}}),y=X({inputs:{x:_},backend:a,attrs:{shape:b}});return a.disposeData(c.dataId),a.disposeData(g.dataId),a.disposeData(_.dataId),y}};var _a,ya={kernelName:t.SparseFillEmptyRows,backendName:"wasm",setupFunc:function(e){ba=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var n,a=e.backend,r=e.inputs,i=r.indices,o=r.values,u=r.denseShape,d=r.defaultValue,l=i.shape[0],c=i.shape[1],p=a.readSync(u.dataId)[0],m=[l+p,c],f=a.dataIdMap.get(i.dataId).id,h=a.dataIdMap.get(o.dataId).id,b=a.dataIdMap.get(d.dataId).id,g=a.makeOutput(m,i.dtype),_=a.dataIdMap.get(g.dataId).id,y=a.makeOutput(m.slice(0,1),o.dtype),v=a.dataIdMap.get(y.dataId).id,k=a.makeOutput([p],"bool"),w=a.dataIdMap.get(k.dataId).id,I=a.makeOutput([l],i.dtype),S=a.dataIdMap.get(I.dataId).id,M=a.makeOutput([4],"int32"),A=a.dataIdMap.get(M.dataId).id,F=ba(f,h,s[o.dtype],l,p,c,b,_,v,w,S,A),E=a.readSync(M.dataId);switch(E[0]){case 1:n=t.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(E[1]);break;case 2:n=t.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(E[1],E[2]);break;case 3:n=t.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(E[1],E[2],E[3]);break;default:n=""}if(a.disposeData(M.dataId),n)throw a.disposeData(g.dataId),a.disposeData(y.dataId),a.disposeData(k.dataId),a.disposeData(I.dataId),new Error(n);var T=g,x=y;return F!==m[0]&&(T=re({inputs:{x:g},attrs:{begin:0,size:[F,c]},backend:a}),x=re({inputs:{x:y},attrs:{begin:0,size:F},backend:a}),a.disposeData(g.dataId),a.disposeData(y.dataId)),[T,x,k,I]}};var va,ka={kernelName:t.SparseReshape,backendName:"wasm",setupFunc:function(e){_a=e.wasm.cwrap(t.SparseReshape,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=a.inputIndices,i=a.inputShape,o=a.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==i.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(i.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var s=n.dataIdMap.get(r.dataId).id,u=n.dataIdMap.get(i.dataId).id,d=n.dataIdMap.get(o.dataId).id,l=r.shape[0],c=t.util.sizeFromShape(o.shape),p=n.makeOutput([l,c],r.dtype),m=n.dataIdMap.get(p.dataId).id,f=n.makeOutput([c],o.dtype),h=n.dataIdMap.get(f.dataId).id,b=n.makeOutput([3],"int32"),g=n.dataIdMap.get(b.dataId).id;_a(s,u,d,l,m,h,g);var _,y=n.readSync(b.dataId);switch(y[0]){case 0:_=t.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(y[1],y[2]);break;case 1:_=t.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(y[1],y[2]);break;case 2:_=t.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:var v=Array.from(n.readSync(i.dataId)),k=Array.from(n.readSync(f.dataId));_=t.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(v,k);break;case 4:v=Array.from(n.readSync(i.dataId)),k=Array.from(n.readSync(f.dataId));_=t.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(v,k);break;default:_=""}if(n.disposeData(b.dataId),_)throw n.disposeData(p.dataId),n.disposeData(f.dataId),new Error(_);return[p,f]}};function wa(e){va=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function Ia(e,n){var a=e.backend,r=e.inputs,i=r.data,o=r.indices,u=r.segmentIds,d=o.shape[0],l=a.readSync(u.dataId,d-1,d)[0],c=d>0?l+1:0;if(c<0)throw new Error(t.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var p=i.shape.slice();p[0]=c;var m=a.dataIdMap.get(i.dataId).id,f=a.dataIdMap.get(o.dataId).id,h=a.dataIdMap.get(u.dataId).id,b=a.makeOutput(p,i.dtype),g=a.dataIdMap.get(b.dataId).id,_=a.makeOutput([4],"int32"),y=a.dataIdMap.get(_.dataId).id;va(m,s[i.dtype],i.shape[0],f,h,g,y,n,0);var v,k=a.readSync(_.dataId);switch(k[0]){case 0:v=t.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:v=t.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:v=t.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(k[1],k[2]);break;case 3:v=t.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(k[1],k[2],k[3]);break;default:v=""}if(a.disposeData(_.dataId),v)throw a.disposeData(b.dataId),new Error(v);return b}var Sa={kernelName:t.SparseSegmentMean,backendName:"wasm",setupFunc:wa,kernelFunc:function(e){return Ia(e,!0)}};var Ma,Aa={kernelName:t.SparseSegmentSum,backendName:"wasm",setupFunc:wa,kernelFunc:function(e){return Ia(e,!1)}};var Fa={kernelName:t.SparseToDense,backendName:"wasm",setupFunc:function(e){Ma=e.wasm.cwrap(t.SparseToDense,null,["number","number","number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=a.sparseIndices,o=a.sparseValues,u=a.defaultValue,d=r.outputShape,l=n.makeOutput(d,u.dtype);if(0===t.util.sizeFromShape(d))return l;var c=t.backend_util.calculateShapes(o,i,d),p=c.sliceRank,m=c.numUpdates,f=c.sliceSize,h=c.strides,b=c.outputSize,g=n.dataIdMap.get(i.dataId).id,_=n.dataIdMap.get(o.dataId).id,y=n.dataIdMap.get(u.dataId).id,v=new Uint8Array(new Int32Array(h).buffer),k=n.dataIdMap.get(l.dataId).id;return Ma(g,_,o.shape.length,y,s[u.dtype],p,m,f,v,b,k),l}};var Ea,Ta={kernelName:t.SplitV,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,a=e.attrs,r=e.backend,i=n.x,o=a.numOrSizeSplits,s=a.axis,u=t.util.parseAxisParam(s,i.shape)[0],d=t.backend_util.prepareSplitSize(i,o,u),l=new Array(i.shape.length).fill(0),c=i.shape.slice();return d.map((function(e){var t=h([],f(c),!1);t[u]=e;var n=re({inputs:{x:i},attrs:{begin:l,size:t},backend:r});return l[u]+=e,n}))}},xa=g(t.Sqrt),Da=g(t.Square),Na=k(t.SquaredDifference);var Ca,Ra={kernelName:t.Step,backendName:"wasm",setupFunc:function(e){Ea=e.wasm.cwrap(t.Step,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,a=e.attrs.alpha,r=n.x,i=t.dataIdMap.get(r.dataId).id,o=t.makeOutput(r.shape,r.dtype),u=t.dataIdMap.get(o.dataId).id;return Ea(i,a,s[r.dtype],u),o}};var Pa={kernelName:t.StridedSlice,backendName:"wasm",setupFunc:function(e){Ca=e.wasm.cwrap(t.StridedSlice,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var n,a=e.backend,r=e.inputs,i=e.attrs,o=r.x,s=i.begin,u=i.end,d=i.strides,l=i.beginMask,c=i.endMask,p=i.ellipsisMask,m=i.newAxisMask,f=i.shrinkAxisMask,h=t.slice_util.sliceInfo(o.shape,s,u,d,l,c,p,m,f),b=h.finalShapeSparse,g=h.finalShape,_=h.isIdentity,y=h.sliceDim0,v=h.isSimpleSlice,k=h.begin,w=h.end,I=h.strides;if(_)n=X({inputs:{x:o},backend:a,attrs:{shape:g}});else if(y||v){t.util.assert(o.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(o.shape.length)}));var S=t.slice_util.computeOutShape(k,w,I),M=re({inputs:{x:o},backend:a,attrs:{begin:k,size:S}});n=X({inputs:{x:M},backend:a,attrs:{shape:g}}),a.disposeData(M.dataId)}else{var A=a.makeOutput(b,"float32"),F=a.dataIdMap.get(o.dataId).id,E=new Uint8Array(new Int32Array(t.util.computeStrides(o.shape)).buffer),T=new Uint8Array(new Int32Array(k).buffer),x=new Uint8Array(new Int32Array(w).buffer),D=new Uint8Array(new Int32Array(I).buffer),N=new Uint8Array(new Int32Array(b).buffer),C=new Uint8Array(new Int32Array(t.util.computeStrides(b)).buffer),R=a.dataIdMap.get(A.dataId).id;Ca(F,E,o.shape.length,T,x,D,N,C,b.length,R),n=X({inputs:{x:A},backend:a,attrs:{shape:g}}),a.disposeData(A.dataId)}return n}};var Oa={kernelName:t.StringNGrams,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,a=e.attrs,r=n.data,i=n.dataSplits,o=a.separator,s=a.nGramWidths,u=a.leftPad,d=a.rightPad,l=a.padWidth,c=a.preserveShortSequences,p=f(function(e,t,n,a,r,i,o,s){return new ne(n,a,r,i,o,s).compute(e,t)}(t.readSync(r.dataId),t.readSync(i.dataId),o,s,u,d,l,c),2),m=p[0],h=p[1],b=t.makeOutput([m.length],"string");t.dataIdMap.get(b.dataId).stringBytes=m;var g=t.makeOutput(i.shape,"int32");return t.typedArrayFromHeap(g).set(h),[b,g]}};var La={kernelName:t.StringSplit,backendName:"wasm",kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=a.input,o=a.delimiter,s=r.skipEmpty,u=f(function(e,n,a){for(var r=e.length,i=[],o=0,s=0,u=new Array(r),d=0;d<r;++d){var l=i.length;ae(e[d],n,a,i);var c=i.length-l;u[d]=c,o+=c,s=Math.max(s,c)}var p=t.util.getArrayFromDType("int32",2*o),m=new Array(o),f=[r,s],h=0;for(d=0;d<r;++d)for(var b=0;b<u[d];++b)p[2*h]=d,p[2*h+1]=b,m[h]=i[h],++h;return[p,m,f]}(n.readSync(i.dataId),n.readSync(o.dataId)[0],s),3),d=u[0],l=u[1],c=u[2],p=l.length,m=n.makeOutput([p,2],"int32");n.typedArrayFromHeap(m).set(d);var h=n.makeOutput([p],"string");n.dataIdMap.get(h.dataId).stringBytes=l;var b=n.makeOutput([2],"int32");return n.typedArrayFromHeap(b).set(c),[m,h,b]}};var Wa,Ua={kernelName:t.StringToHashBucketFast,backendName:"wasm",kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=a.input,o=r.numBuckets,s=function(e,n){for(var a=t.util.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)a[r]=t.util.fingerPrint64(e[r]).modulo(n).getLowBitsUnsigned();return a}(n.readSync(i.dataId),o),u=n.makeOutput(i.shape,"int32");return n.typedArrayFromHeap(u).set(s),u}},Ba=k(t.Sub);var za,Ga={kernelName:t.Sum,backendName:"wasm",setupFunc:function(e){Wa=e.wasm.cwrap(t.Sum,null,["number","number","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs,r=e.attrs,i=r.axis,o=r.keepDims,u=a.x,d=n.dataIdMap.get(u.dataId).id,l=d,c=u,p=D(u,i,n),m=p.transposed,h=p.axes,b=p.originalAxes,g=p.inputWasTransposed,_=h;if(g){var y=n.dataIdMap.get(m.dataId).id;y!==d&&(c=m,l=y,_=t.backend_util.getInnerMostAxes(_.length,c.shape.length))}t.backend_util.assertAxesAreInnerMostDims("sum",_,c.shape.length);var v=f(t.backend_util.computeOutAndReduceShapes(c.shape,_),2),k=v[0],w=v[1],I=t.util.sizeFromShape(w),S=n.makeOutput(k,c.dtype);if(0!==t.util.sizeFromShape(c.shape)){var M=n.dataIdMap.get(S.dataId).id;Wa(l,I,s[S.dtype],M)}if(g&&n.disposeData(m.dataId),o){var A=t.backend_util.expandShapeToKeepDim(S.shape,b);S.shape=A}return S}},Ha=g(t.Tan),ja=g(t.Tanh);var Va,qa={kernelName:t.TensorScatterUpdate,backendName:"wasm",setupFunc:function(e){za=e.wasm.cwrap(t.TensorScatterUpdate,null,["number","number","number","number","number","number","array","number","number","number"])},kernelFunc:function(e){var n=e.backend,a=e.inputs;e.attrs;var r=a.tensor,i=a.indices,o=a.updates,u=n.makeOutput(r.shape,r.dtype);if(0===t.util.sizeFromShape(r.shape))return u;var d=t.scatter_util.calculateShapes(o,i,r.shape),l=d.sliceRank,c=d.numUpdates,p=d.sliceSize,m=d.strides,f=d.outputSize,h=n.dataIdMap.get(i.dataId).id,b=n.dataIdMap.get(o.dataId).id,g=n.dataIdMap.get(r.dataId).id,_=new Uint8Array(new Int32Array(m).buffer),y=n.dataIdMap.get(u.dataId).id;return za(h,b,s[o.dtype],l,c,p,_,f,y,g),u}};var Ya,Ja={kernelName:t.Tile,backendName:"wasm",setupFunc:function(e){Va=e.wasm.cwrap(t.Tile,null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=n.dataIdMap.get(r.dataId).id,o=a.reps,u=new Array(r.shape.length),d=0;d<u.length;d++)u[d]=r.shape[d]*o[d];var l=new Uint8Array(new Int32Array(r.shape).buffer),c=new Uint8Array(new Int32Array(u).buffer),p=n.makeOutput(u,r.dtype),m=n.dataIdMap.get(p.dataId).id;return Va(i,l,r.shape.length,c,u.length,s[p.dtype],m),p}};var Ka,Qa={kernelName:t.TopK,backendName:"wasm",setupFunc:function(e){Ya=e.wasm.cwrap(t.TopK,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.k,o=a.sorted,u=n.dataIdMap.get(r.dataId).id,d=new Uint8Array(new Int32Array(r.shape).buffer),l=r.shape.slice();l[l.length-1]=i;var c=n.makeOutput(l,r.dtype),p=n.dataIdMap.get(c.dataId).id,m=n.makeOutput(l,"int32"),f=n.dataIdMap.get(m.dataId).id;return Ya(u,d,r.shape.length,s[r.dtype],i,o,p,f),[c,m]}};var Xa={kernelName:t.Transform,backendName:"wasm",setupFunc:function(e){Ka=e.wasm.cwrap(t.Transform,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])},kernelFunc:function(e){var n,a=e.backend,r=e.inputs,i=e.attrs,o=r.image,s=r.transforms,u=i.interpolation,d=i.fillMode,l=i.fillValue,c=i.outputShape,p=f(o.shape,4),m=p[0],h=p[1],b=p[2],g=p[3],_=f(null!=c?c:[h,b],2),y=_[0],v=_[1],k=[m,y,v,g],w=new Uint8Array(new Int32Array(t.util.computeStrides(o.shape)).buffer),I=new Uint8Array(new Int32Array(t.util.computeStrides(k)).buffer),S=a.makeOutput(k,o.dtype),M=a.dataIdMap.get(S.dataId).id,A=a.dataIdMap.get(o.dataId).id,F=a.dataIdMap.get(s.dataId).id,E="nearest"===u?1:2;switch(d){case"constant":default:n=1;break;case"reflect":n=2;break;case"wrap":n=3;break;case"nearest":n=4}return Ka(A,F,s.shape[0]>1,m,y,v,g,b,h,w,o.shape.length-1,I,k.length-1,E,n,l,M),S}};var Za={kernelName:t.Unique,backendName:"wasm",kernelFunc:function(e){var n=e.inputs,a=e.attrs,r=e.backend,i=a.axis,o=n.x,s=function(e,n,a,r){for(var i=t.util.parseAxisParam(n,a)[0],o=[1,a[0],1],s=0;s<i;s++)o[0]*=a[s];for(o[1]=a[i],s=i+1;s<a.length;s++)o[2]*=a[s];var u=new Map,d=new Int32Array(a[i]),l=new t.TensorBuffer(o,r,e),c=[],p=1===o[0]&&1===o[2];for(s=0;s<a[i];s++){var m=void 0;if(p)m=e[s].toString();else{for(var f=[],h=0;h<o[0];h++)for(var b=0;b<o[2];b++)f.push(l.get(h,s,b));m=f.join(",")}var g=u.get(m);if(null!=g)d[s]=g;else{var _=u.size;u.set(m,_),d[s]=_,c.push(s)}}var y=o.slice();y[1]=u.size;var v=new t.TensorBuffer(y,r);c.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var a=0;a<o[2];a++)v.set(l.get(n,e,a),n,t,a)}));var k=a.slice();return k[i]=y[1],{outputValues:v.values,outputShape:k,indices:d}}(r.readSync(o.dataId),i,o.shape,o.dtype),u=s.outputValues,d=s.outputShape,l=s.indices;return[r.makeOutput(d,o.dtype,void 0,u),r.makeOutput([l.length],"int32",void 0,l)]}};var $a={kernelName:t.Unpack,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.value,i=a.axis;i<0&&(i+=r.shape.length);for(var o=r.shape[i],s=r.shape.length,u=new Array(s-1),d=0,l=0;l<s;l++)l!==i&&(u[d++]=r.shape[l]);var c=new Array(o),p=new Array(s).fill(0),m=r.shape.slice();for(m[i]=1,l=0;l<c.length;l++)p[i]=l,c[l]=re({inputs:{x:r},attrs:{begin:p,size:m},backend:n});return c.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}};var er,tr,nr={kernelName:t.ZerosLike,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,a=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(a).fill(0),a}},ar=[b,_,y,v,I,S,C,R,L,W,U,B,z,G,H,V,Q,Y,K,ee,se,ue,de,le,me,fe,he,_e,ve,we,Se,Ae,Te,xe,De,Ce,Pe,Le,Ue,ze,He,Ve,Ye,Ke,Xe,Ze,$e,et,tt,nt,rt,it,ut,lt,ct,pt,ft,bt,_t,vt,wt,It,St,F,Mt,At,Ft,Tt,xt,Dt,Ct,Pt,Rt,Ot,Lt,Wt,Ut,zt,Ht,Vt,qt,Jt,Qt,Zt,en,nn,rn,un,dn,cn,bn,gn,_n,yn,wn,Sn,An,Fn,En,Tn,Dn,Cn,Rn,On,Wn,Un,Bn,zn,Gn,Hn,$,Vn,Yn,Kn,Xn,$n,ta,na,aa,ia,sa,da,la,ca,pa,ma,fa,ie,fn,ha,ga,ya,ka,Sa,Aa,Fa,Ta,xa,Da,Na,Ra,Pa,Oa,La,Ua,Ba,Ga,Ha,ja,qa,Ja,Qa,Xa,x,Za,$a,nr];try{for(var rr=m(ar),ir=rr.next();!ir.done;ir=rr.next()){var or=ir.value;t.registerKernel(or)}}catch(e){er={error:e}}finally{try{ir&&!ir.done&&(tr=rr.return)&&tr.call(rr)}finally{if(er)throw er.error}}var sr=t.env();sr.registerFlag("WASM_HAS_SIMD_SUPPORT",(function(){return c(void 0,void 0,void 0,(function(){return p(this,(function(e){try{return[2,WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))]}catch(e){return[2,!1]}return[2]}))}))})),sr.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",(function(){return c(void 0,void 0,void 0,(function(){return p(this,(function(e){if(sr.get("IS_NODE"))return[2,!1];try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),[2,WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))]}catch(e){return[2,!1]}return[2]}))}))}));var ur="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function dr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lr(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cr={exports:{}};!function(e){var t,o=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(t=t||__filename),function(e){function o(){return G.buffer!=J&&re(G.buffer),K}function s(){return G.buffer!=J&&re(G.buffer),Q}function u(){return G.buffer!=J&&re(G.buffer),X}function d(){return G.buffer!=J&&re(G.buffer),Z}function l(){return G.buffer!=J&&re(G.buffer),$}var c,p,b,g="undefined"!=typeof(e=e||{})?e:{};g.ready=new Promise((function(e,t){c=e,p=t})),["_malloc","_free","__emscripten_thread_init","__emscripten_thread_exit","__emscripten_thread_crashed","__emscripten_tls_init","_pthread_self","executeNotifiedProxyingQueue","establishStackSpace","invokeEntryPoint","PThread","_init","_init_with_threads_count","_get_threads_count","_register_tensor","_dispose_data","_dispose","_Abs","_Acos","_Acosh","_Add","_AddN","_All","_Any","_ArgMax","_ArgMin","_Asin","_Asinh","_Atan","_Atan2","_Atanh","_AvgPool","_AvgPool3D","_AvgPool3DGrad","_AvgPoolGrad","_BatchMatMul","_Bincount","_BitwiseAnd","_Ceil","_ClipByValue","_Conv2D","_Conv2DBackpropInput","_Conv3D","_Conv3DBackpropFilterV2","_Conv3DBackpropInputV2","_Cos","_Cosh","_CropAndResize","_Cumprod","_Cumsum","_DenseBincount","_DepthToSpace","_DepthwiseConv2dNative","_Diag","_Dilation2D","_Dilation2DBackpropFilter","_Dilation2DBackpropInput","_Elu","_EluGrad","_Equal","_Erf","_Exp","_Expm1","_FlipLeftRight","_Floor","_FloorDiv","_FusedBatchNorm","_FusedConv2D","_FusedDepthwiseConv2D","_Gather","_GatherNd","_Greater","_GreaterEqual","_IsFinite","_IsInf","_IsNan","_LRN","_LRNGrad","_LeakyRelu","_Less","_LessEqual","_LinSpace","_Log","_Log1p","_LogicalAnd","_LogicalNot","_LogicalOr","_LogicalXor","_Max","_MaxPool","_MaxPool3D","_MaxPool3DGrad","_MaxPoolGrad","_MaxPoolWithArgmax","_Maximum","_Mean","_Min","_Minimum","_MirrorPad","_Mod","_Multinomial","_Multiply","_Neg","_NonMaxSuppressionV3","_NonMaxSuppressionV4","_NonMaxSuppressionV5","_NotEqual","_OneHot","_PadV2","_Pow","_Prelu","_Prod","_RealDiv","_Reciprocal","_Relu","_Relu6","_ResizeBilinear","_ResizeBilinearGrad","_ResizeNearestNeighbor","_ResizeNearestNeighborGrad","_Reverse","_RotateWithOffset","_Round","_Rsqrt","_ScatterNd","_SearchSorted","_SelectV2","_Selu","_Sigmoid","_Sign","_Sin","_Sinh","_Softmax","_Softplus","_SparseFillEmptyRows","_SparseReshape","_SparseSegmentReduction","_SparseToDense","_Sqrt","_Square","_SquaredDifference","_Step","_StridedSlice","_Sub","_Sum","_Tan","_Tanh","_TensorScatterUpdate","_Tile","_TopK","_Transform","_Transpose","__FusedMatMul","_fflush","__emscripten_proxy_execute_task_queue","onRuntimeInitialized"].forEach((function(e){Object.getOwnPropertyDescriptor(g.ready,e)||Object.defineProperty(g.ready,e,{get:function(){return ve("You are getting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")},set:function(){return ve("You are setting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})})),"undefined"!=typeof process&&process.listeners&&(b={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var _=Object.assign({},g),y=function(e,t){throw t},v="object"==typeof window,k="function"==typeof importScripts,w="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,I=!v&&!w&&!k;if(g.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var S,M,A,F=g.ENVIRONMENT_IS_PTHREAD||!1,E="";function T(e){return g.locateFile?g.locateFile(e,E):E+e}function x(e){if(!(e instanceof Ee)){var t=e;e&&"object"==typeof e&&e.stack&&(t=[e,e.stack]),U("exiting due to exception: "+t)}}if(w){if("undefined"==typeof process||!process.release||"node"!==process.release.name)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var D=n,N=a;E=k?N.dirname(E)+"/":__dirname+"/",S=function(e,t){return e=Se(e)?new URL(e):N.normalize(e),D.readFileSync(e,t?void 0:"utf8")},A=function(e){var t=S(e,!0);return t.buffer||(t=new Uint8Array(t)),Y(t.buffer),t},M=function(e,t,n){e=Se(e)?new URL(e):N.normalize(e),D.readFile(e,(function(e,a){e?n(e):t(a.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Ee))throw e})),process.on("unhandledRejection",(function(e){throw e})),y=function(e,t){if(fe())throw process.exitCode=e,t;x(t),process.exit(e)},g.inspect=function(){return"[Emscripten Module object]"};var C=void 0;try{C=require("worker_threads")}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}ur.Worker=C.Worker}else if(I){if("object"==typeof process&&"function"==typeof lr||"object"==typeof window||"function"==typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");"undefined"!=typeof read&&(S=function(e){return read(e)}),A=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(Y("object"==typeof(t=read(e,"binary"))),t)},M=function(e,t,n){setTimeout((function(){return t(A(e))}),0)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(y=function(e,t){x(t),quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)}else{if(!v&&!k)throw new Error("environment detection error");if(k?E=self.location.href:"undefined"!=typeof document&&document.currentScript&&(E=document.currentScript.src),"undefined"!=typeof t&&t&&(E=t),E=0!==E.indexOf("blob:")?E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");w||(S=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},k&&(A=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),M=function(e,t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status||0==a.status&&a.response?t(a.response):n()},a.onerror=n,a.send(null)})}w&&"undefined"==typeof performance&&(ur.performance=r.performance);var R=console.log.bind(console),P=console.warn.bind(console);w&&(R=function(e){return D.writeSync(1,e+"\n")},P=function(e){return D.writeSync(2,e+"\n")});var O,L,W=g.print||R,U=g.printErr||P;function B(e,t){Object.getOwnPropertyDescriptor(g,e)||Object.defineProperty(g,e,{configurable:!0,get:function(){ve("Module."+e+" has been replaced with plain "+t+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function z(e){return"FS_createPath"===e||"FS_createDataFile"===e||"FS_createPreloadedFile"===e||"FS_unlink"===e||"addRunDependency"===e||"FS_createLazyFile"===e||"FS_createDevice"===e||"removeRunDependency"===e}Object.assign(g,_),_=null,O="fetchSettings",Object.getOwnPropertyDescriptor(g,O)&&ve("`Module."+O+"` was supplied but `"+O+"` not included in INCOMING_MODULE_JS_API"),g.arguments&&g.arguments,B("arguments","arguments_"),g.thisProgram&&g.thisProgram,B("thisProgram","thisProgram"),g.quit&&(y=g.quit),B("quit","quit_"),Y("undefined"==typeof g.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),Y("undefined"==typeof g.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),Y("undefined"==typeof g.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),Y("undefined"==typeof g.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),Y("undefined"==typeof g.read,"Module.read option was removed (modify read_ in JS)"),Y("undefined"==typeof g.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),Y("undefined"==typeof g.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),Y("undefined"==typeof g.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),Y("undefined"==typeof g.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),B("read","read_"),B("readAsync","readAsync"),B("readBinary","readBinary"),B("setWindowTitle","setWindowTitle"),Y(v||k||w,"Pthreads do not work in this environment yet (need Web Workers, or an alternative to them)"),Y(!I,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),g.wasmBinary&&(L=g.wasmBinary),B("wasmBinary","wasmBinary");var G,H,j=g.noExitRuntime||!0;B("noExitRuntime","noExitRuntime"),"object"!=typeof WebAssembly&&ve("no native wasm support detected");var V,q=!1;function Y(e,t){e||ve("Assertion failed"+(t?": "+t:""))}var J,K,Q,X,Z,$,ee="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function te(e,t,n){for(var a=(t>>>=0)+n,r=t;e[r]&&!(r>=a);)++r;if(r-t>16&&e.buffer&&ee)return ee.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(var i="";t<r;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if(224==(240&o)?o=(15&o)<<12|s<<6|u:(240!=(248&o)&&Ue("Invalid UTF-8 leading byte "+Ce(o)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),o=(7&o)<<18|s<<12|u<<6|63&e[t++]),o<65536)i+=String.fromCharCode(o);else{var d=o-65536;i+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function ne(e,t){return(e>>>=0)?te(s(),e,t):""}function ae(e,t,n){return Y("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),function(e,t,n,a){if(!(a>0))return 0;for(var r=n>>>=0,i=n+a-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=i)break;t[n++>>>0]=s}else if(s<=2047){if(n+1>=i)break;t[n++>>>0]=192|s>>6,t[n++>>>0]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++>>>0]=224|s>>12,t[n++>>>0]=128|s>>6&63,t[n++>>>0]=128|63&s}else{if(n+3>=i)break;s>1114111&&Ue("Invalid Unicode code point "+Ce(s)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[n++>>>0]=240|s>>18,t[n++>>>0]=128|s>>12&63,t[n++>>>0]=128|s>>6&63,t[n++>>>0]=128|63&s}}return t[n>>>0]=0,n-r}(e,s(),t,n)}function re(e){J=e,g.HEAP8=K=new Int8Array(e),g.HEAP16=new Int16Array(e),g.HEAP32=X=new Int32Array(e),g.HEAPU8=Q=new Uint8Array(e),g.HEAPU16=new Uint16Array(e),g.HEAPU32=Z=new Uint32Array(e),g.HEAPF32=new Float32Array(e),g.HEAPF64=$=new Float64Array(e)}F&&(J=g.buffer);var ie=65536;g.STACK_SIZE&&Y(ie===g.STACK_SIZE,"the stack size can no longer be determined at runtime");var oe,se=g.INITIAL_MEMORY||16777216;if(B("INITIAL_MEMORY","INITIAL_MEMORY"),Y(se>=ie,"INITIAL_MEMORY should be larger than STACK_SIZE, was "+se+"! (STACK_SIZE="+ie+")"),Y("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),F)G=g.wasmMemory,J=g.buffer;else if(g.wasmMemory)G=g.wasmMemory;else if(!((G=new WebAssembly.Memory({initial:se/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw U("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&U("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");function ue(){var e=rt();Y(!(3&e)),0==e&&(e+=4),d()[e>>>2]=34821223,d()[e+4>>>2]=2310721022,d()[0]=1668509029}function de(){if(!q){var e=rt();0==e&&(e+=4);var t=d()[e>>>2],n=d()[e+4>>>2];34821223==t&&2310721022==n||ve("Stack overflow! Stack cookie has been overwritten at "+Ce(e)+", expected hex dwords 0x89BACDFE and 0x2135467, but received "+Ce(n)+" "+Ce(t)),1668509029!==d()[0]&&ve("Runtime error: The application has corrupted its heap memory area (address zero)!")}}G&&(J=G.buffer),Y((se=J.byteLength)%65536==0),re(J),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"}();var le=[],ce=[],pe=[],me=!1;function fe(){return j}function he(){Y(!me),me=!0,F||(de(),Pe(ce))}Y(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),Y(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),Y(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),Y(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var be=0,ge=null,_e=null,ye={};function ve(e){g.onAbort&&g.onAbort(e),U(e="Aborted("+e+")"),q=!0,V=1;var t=new WebAssembly.RuntimeError(e);throw p(t),t}var ke,we={error:function(){ve("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init:function(){we.error()},createDataFile:function(){we.error()},createPreloadedFile:function(){we.error()},createLazyFile:function(){we.error()},open:function(){we.error()},mkdev:function(){we.error()},registerDevice:function(){we.error()},analyzePath:function(){we.error()},loadFilesFromDB:function(){we.error()},ErrnoError:function(){we.error()}};function Ie(e){return e.startsWith("data:application/octet-stream;base64,")}function Se(e){return e.startsWith("file://")}function Me(e,t){return function(){var n=e,a=t;return t||(a=g.asm),Y(me,"native function `"+n+"` called before runtime initialization"),a[e]||Y(a[e],"exported native function `"+n+"` not found"),a[e].apply(null,arguments)}}function Ae(e){try{if(e==ke&&L)return new Uint8Array(L);if(A)return A(e);throw"both async and sync fetching of the wasm failed"}catch(e){ve(e)}}g.FS_createDataFile=we.createDataFile,g.FS_createPreloadedFile=we.createPreloadedFile,Ie(ke="tfjs-backend-wasm-threaded-simd.wasm")||(ke=T(ke));var Fe={};function Ee(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Te(e){Y(!F,"Internal Error! cleanupThread() can only ever be called from main application thread!"),Y(e,"Internal Error! Null pthread_ptr in cleanupThread!");var t=Re.pthreads[e];Y(t),Re.returnWorkerToPool(t)}function xe(e){Y(!F,"Internal Error! spawnThread() can only ever be called from main application thread!"),Y(e.pthread_ptr,"Internal error, no pthread ptr!");var t=Re.getNewWorker();if(!t)return 6;Y(!t.pthread_ptr,"Internal error!"),Re.runningWorkers.push(t),Re.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var n={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.runPthread=function(){w&&t.ref(),t.postMessage(n,e.transferList),delete t.runPthread},t.loaded&&t.runPthread(),0}function De(e){if(F)return He(1,1,e);V=e,fe()||(Re.terminateAllThreads(),g.onExit&&g.onExit(e),q=!0),y(e,new Ee(e))}var Ne=function(e,t){if(V=e,function(){var e=W,t=U,n=!1;W=U=function(e){n=!0};try{nt(0),Je[1].length&&Ke(1,10),Je[2].length&&Ke(2,10)}catch(e){}W=e,U=t,n&&(Ue("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc."),Ue("(this may also be due to not including full filesystem support - try building with -sFORCE_FILESYSTEM)"))}(),!t&&F)throw Oe(e),"unwind";if(fe()&&!t){var n="program exited (with status: "+e+"), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)";p(n),U(n)}De(e)};function Ce(e){return"0x"+e.toString(16).padStart(8,"0")}var Re={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){F?Re.initWorker():Re.initMainThread()},initMainThread:function(){for(var e=8;e--;)Re.allocateUnusedWorker()},initWorker:function(){j=!1},setExitStatus:function(e){V=e},terminateAllThreads:function(){var e,t,n,a;Y(!F,"Internal Error! terminateAllThreads() can only ever be called from main application thread!");try{for(var r=m(Object.values(Re.pthreads)),i=r.next();!i.done;i=r.next())Y(u=i.value),Re.returnWorkerToPool(u)}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}Y(0===Object.keys(Re.pthreads).length),Y(0===Re.runningWorkers.length);try{for(var o=m(Re.unusedWorkers),s=o.next();!s.done;s=o.next()){var u;Y(!(u=s.value).pthread_ptr),u.terminate()}}catch(e){n={error:e}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}Re.unusedWorkers=[]},returnWorkerToPool:function(e){var t=e.pthread_ptr;delete Re.pthreads[t],Re.unusedWorkers.push(e),Re.runningWorkers.splice(Re.runningWorkers.indexOf(e),1),e.pthread_ptr=0,w&&e.unref(),ot(t)},receiveObjectTransfer:function(e){},threadInitTLS:function(){Re.tlsInitFunctions.forEach((function(e){return e()}))},loadWasmModuleToWorker:function(e,n){var a,r;e.onmessage=function(t){var a,r=t.data,i=r.cmd;if(e.pthread_ptr&&(Re.currentProxiedOperationCallerThread=e.pthread_ptr),r.targetThread&&r.targetThread!=et()){var o=Re.pthreads[r.targetThread];return o?o.postMessage(r,r.transferList):U('Internal error! Worker sent a message "'+i+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(Re.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===i?Ge(r.queue):"spawnThread"===i?xe(r):"cleanupThread"===i?Te(r.thread):"killThread"===i?function(e){Y(!F,"Internal Error! killThread() can only ever be called from main application thread!"),Y(e,"Internal Error! Null pthread_ptr in killThread!");var t=Re.pthreads[e];delete Re.pthreads[e],t.terminate(),ot(e),Re.runningWorkers.splice(Re.runningWorkers.indexOf(t),1),t.pthread_ptr=0}(r.thread):"cancelThread"===i?(a=r.thread,Y(!F,"Internal Error! cancelThread() can only ever be called from main application thread!"),Y(a,"Internal Error! Null pthread_ptr in cancelThread!"),Re.pthreads[a].postMessage({cmd:"cancel"})):"loaded"===i?(e.loaded=!0,w&&e.unref(),n&&n(e),e.runPthread&&e.runPthread()):"print"===i?W("Thread "+r.threadId+": "+r.text):"printErr"===i?U("Thread "+r.threadId+": "+r.text):"alert"===i?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?e.postMessage(r):"callHandler"===i?g[r.handler].apply(g,h([],f(r.args),!1)):i&&U("worker sent an unknown command "+i),Re.currentProxiedOperationCallerThread=void 0},e.onerror=function(t){var n="worker sent an error!";throw e.pthread_ptr&&(n="Pthread "+Ce(e.pthread_ptr)+" sent an error!"),U(n+" "+t.filename+":"+t.lineno+": "+t.message),t},w&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("detachedExit",(function(){}))),Y(G instanceof WebAssembly.Memory,"WebAssembly memory should have been loaded by now!"),Y(H instanceof WebAssembly.Module,"WebAssembly Module should have been loaded by now!");var i=[];try{for(var o=m(["onExit","onAbort","print","printErr"]),s=o.next();!s.done;s=o.next()){var u=s.value;g.hasOwnProperty(u)&&i.push(u)}}catch(e){a={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}e.postMessage({cmd:"load",handlers:i,urlOrBlob:g.mainScriptUrlOrBlob||t,wasmMemory:G,wasmModule:H})},allocateUnusedWorker:function(){var e,t=T("tfjs-backend-wasm-threaded-simd.worker.js");e=new Worker(t),Re.unusedWorkers.push(e)},getNewWorker:function(){return 0==Re.unusedWorkers.length&&(U("Tried to spawn a new thread, but the thread pool is exhausted.\nThis might result in a deadlock unless some threads eventually exit or the code explicitly breaks out to the event loop.\nIf you want to increase the pool size, use setting `-sPTHREAD_POOL_SIZE=...`.\nIf you want to throw an explicit error instead of the risk of deadlocking in those cases, use setting `-sPTHREAD_POOL_SIZE_STRICT=2`."),Re.allocateUnusedWorker(),Re.loadWasmModuleToWorker(Re.unusedWorkers[0])),Re.unusedWorkers.pop()}};function Pe(e){for(;e.length>0;)e.shift()(g)}function Oe(e){if(F)return He(2,0,e);try{Ne(e)}catch(e){!function(e){if(e instanceof Ee||"unwind"==e)return V;de(),e instanceof WebAssembly.RuntimeError&&bt()<=0&&U("Stack overflow detected.  You can try increasing -sSTACK_SIZE (currently set to 65536)"),y(1,e)}(e)}}g.PThread=Re,g.establishStackSpace=function(){var e=et(),t=u()[e+52>>>2],n=t-u()[e+56>>>2];Y(0!=t),Y(0!=n),Y(t>n,"stackTop must be higher then stackMax"),dt(t,n),ft(t),ue()};var Le,We=[];function Ue(e){Ue.shown||(Ue.shown={}),Ue.shown[e]||(Ue.shown[e]=1,w&&(e="warning: "+e),U(e))}function Be(e,t,n,a){return F?He(3,1,e,t,n,a):ze(e,t,n,a)}function ze(e,t,n,a){if("undefined"==typeof SharedArrayBuffer)return U("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var r=[];if(F&&0===r.length)return Be(e,t,n,a);var i={startRoutine:n,pthread_ptr:e,arg:a,transferList:r};return F?(i.cmd="spawnThread",postMessage(i,r),0):xe(i)}function Ge(e){Atomics.store(u(),e>>2,1),et()&&it(e),Atomics.compareExchange(u(),e>>2,1,0)}function He(e,t){var n,a,r,i=arguments.length-2,o=arguments;if(i>19)throw"emscripten_proxy_to_main_thread_js: Too many arguments "+i+" to proxied function idx="+e+", maximum supported is 19!";return n=function(){for(var n=i,a=ht(8*n),r=a>>3,s=0;s<i;s++){var u=o[2+s];l()[r+s>>>0]=u}return at(e,n,a,t)},a=mt(),r=n(),ft(a),r}g.invokeEntryPoint=function(e,t){var n,a,r=((a=We[n=e])||(n>=We.length&&(We.length=n+1),We[n]=a=oe.get(n)),Y(oe.get(n)==a,"JavaScript-side Wasm function table mirror is out of date!"),a)(t);de(),fe()?Re.setExitStatus(r):st(r)},g.executeNotifiedProxyingQueue=Ge,Le=w?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:function(){return performance.timeOrigin+performance.now()};var je=[];function Ve(e){try{return G.grow(e-J.byteLength+65535>>>16),re(G.buffer),1}catch(t){U("emscripten_realloc_buffer: Attempted to grow heap from "+J.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}function qe(e){if(F)return He(4,1,e);ve("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")}function Ye(e,t,n,a,r){return F?He(5,1,e,t,n,a,r):70}var Je=[null,[],[]];function Ke(e,t){var n=Je[e];Y(n),0===t||10===t?((1===e?W:U)(te(n,0)),n.length=0):n.push(t)}function Qe(e,t,n,a){if(F)return He(6,1,e,t,n,a);for(var r=0,i=0;i<n;i++){var o=d()[t>>>2],u=d()[t+4>>>2];t+=8;for(var l=0;l<u;l++)Ke(e,s()[o+l>>>0]);r+=u}return d()[a>>>2]=r,0}function Xe(e,t,n,a,r){var i={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);ae(e,t=ht(n),n)}return t},array:function(e){var t=ht(e.length);return function(e,t){Y(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),o().set(e,t>>>0)}(e,t),t}},s=function(e){var t=g["_"+e];return Y(t,"Cannot call unknown function "+e+", make sure it is exported"),t}(e),u=[],d=0;if(Y("array"!==t,'Return type should not be "array".'),a)for(var l=0;l<a.length;l++){var c=i[n[l]];c?(0===d&&(d=mt()),u[l]=c(a[l])):u[l]=a[l]}var p=s.apply(null,u);return p=function(e){return 0!==d&&ft(d),function(e){return"string"===t?ne(e):"boolean"===t?Boolean(e):e}(e)}(p)}Re.init();var Ze=[null,De,Oe,Be,qe,Ye,Qe],$e={__assert_fail:function(e,t,n,a){ve("Assertion failed: "+ne(e)+", at: "+[t?ne(t):"unknown filename",n,a?ne(a):"unknown function"])},__emscripten_init_main_thread_js:function(e){tt(e,!k,1,!v),Re.threadInitTLS()},__emscripten_thread_cleanup:function(e){F?postMessage({cmd:"cleanupThread",thread:e}):Te(e)},__pthread_create_js:ze,_emscripten_default_pthread_stack_size:function(){return 65536},_emscripten_get_now_is_monotonic:function(){return!0},_emscripten_notify_task_queue:function(e,t,n,a){if(e==t)setTimeout((function(){return Ge(a)}));else if(F)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:a});else{var r=Re.pthreads[e];if(!r)return void U("Cannot send message to thread with ID "+e+", unknown thread ID!");r.postMessage({cmd:"processProxyingQueue",queue:a})}return 1},_emscripten_set_offscreencanvas_size:function(e,t,n){return U("emscripten_set_offscreencanvas_size: Build with -sOFFSCREENCANVAS_SUPPORT=1 to enable transferring canvases to pthreads."),-1},abort:function(){ve("native code called abort()")},emscripten_check_blocking_allowed:function(){w||k||Ue("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return 4294901760},emscripten_get_now:Le,emscripten_memcpy_big:function(e,t,n){s().copyWithin(e>>>0,t>>>0,t+n>>>0)},emscripten_num_logical_cores:function(){return w?i.cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){je.length=t;for(var a=n>>3,r=0;r<t;r++)je[r]=l()[a+r>>>0];var i=e<0?Fe[-e-1]:Ze[e];return Y(i.length==t,"Call args mismatch in emscripten_receive_on_main_thread_js"),i.apply(null,je)},emscripten_resize_heap:function(e){var t=s().length;if((e>>>=0)<=t)return!1;var n=4294901760;if(e>n)return U("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is "+n+" bytes!"),!1;for(var a,r,i=1;i<=4;i*=2){var o=t*(1+.2/i);o=Math.min(o,e+100663296);var u=Math.min(n,(a=Math.max(e,o))+((r=65536)-a%r)%r);if(Ve(u))return!0}return U("Failed to grow the heap from "+t+" bytes to "+u+" bytes, not enough memory!"),!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:Ne,fd_close:qe,fd_seek:Ye,fd_write:Qe,memory:G||g.wasmMemory};!function(){var e,t={env:$e,wasi_snapshot_preview1:$e};function n(e,t){var n,a,r=e.exports;if(g.asm=r,n=g.asm._emscripten_tls_init,Re.tlsInitFunctions.push(n),Y(oe=g.asm.__indirect_function_table,"table not found in wasm exports"),a=g.asm.__wasm_call_ctors,ce.unshift(a),H=t,!F){var i=Re.unusedWorkers.length;Re.unusedWorkers.forEach((function(e){Re.loadWasmModuleToWorker(e,(function(){--i||function(e){if(be--,g.monitorRunDependencies&&g.monitorRunDependencies(be),e?(Y(ye[e]),delete ye[e]):U("warning: run dependency removed without ID"),0==be&&(null!==ge&&(clearInterval(ge),ge=null),_e)){var t=_e;_e=null,t()}}("wasm-instantiate")}))}))}}F||(e="wasm-instantiate",be++,g.monitorRunDependencies&&g.monitorRunDependencies(be),e?(Y(!ye[e]),ye[e]=1,null===ge&&"undefined"!=typeof setInterval&&(ge=setInterval((function(){if(q)return clearInterval(ge),void(ge=null);var e=!1;for(var t in ye)e||(e=!0,U("still waiting on run dependencies:")),U("dependency: "+t);e&&U("(end of list)")}),1e4))):U("warning: run dependency added without ID"));var a=g;function r(e){Y(g===a,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),a=null,n(e.instance,e.module)}function i(e){return function(){if(!L&&(v||k)){if("function"==typeof fetch&&!Se(ke))return fetch(ke,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ke+"'";return e.arrayBuffer()})).catch((function(){return Ae(ke)}));if(M)return new Promise((function(e,t){M(ke,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return Ae(ke)}))}().then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(e,(function(e){U("failed to asynchronously prepare wasm: "+e),Se(ke)&&U("warning: Loading from a file URI ("+ke+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),ve(e)}))}if(g.instantiateWasm)try{return g.instantiateWasm(t,n)}catch(e){U("Module.instantiateWasm callback failed with error: "+e),p(e)}(L||"function"!=typeof WebAssembly.instantiateStreaming||Ie(ke)||Se(ke)||w||"function"!=typeof fetch?i(r):fetch(ke,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(e){return U("wasm streaming compile failed: "+e),U("falling back to ArrayBuffer instantiation"),i(r)}))}))).catch(p)}(),g.___wasm_call_ctors=Me("__wasm_call_ctors"),g._init=Me("init"),g._init_with_threads_count=Me("init_with_threads_count"),g._get_threads_count=Me("get_threads_count"),g._register_tensor=Me("register_tensor"),g._dispose_data=Me("dispose_data"),g._dispose=Me("dispose"),g._Abs=Me("Abs"),g._Acos=Me("Acos"),g._Acosh=Me("Acosh"),g._Add=Me("Add"),g._AddN=Me("AddN"),g._All=Me("All"),g._Any=Me("Any"),g._ArgMax=Me("ArgMax"),g._ArgMin=Me("ArgMin"),g._Asin=Me("Asin"),g._Asinh=Me("Asinh"),g._Atan=Me("Atan"),g._Atan2=Me("Atan2"),g._Atanh=Me("Atanh"),g._AvgPool=Me("AvgPool"),g._AvgPool3D=Me("AvgPool3D"),g._AvgPool3DGrad=Me("AvgPool3DGrad"),g._AvgPoolGrad=Me("AvgPoolGrad"),g._BatchMatMul=Me("BatchMatMul"),g._Bincount=Me("Bincount"),g._BitwiseAnd=Me("BitwiseAnd"),g._Ceil=Me("Ceil"),g._ClipByValue=Me("ClipByValue"),g._Conv2D=Me("Conv2D"),g._Conv2DBackpropInput=Me("Conv2DBackpropInput"),g._Conv3D=Me("Conv3D"),g._Conv3DBackpropFilterV2=Me("Conv3DBackpropFilterV2"),g._Conv3DBackpropInputV2=Me("Conv3DBackpropInputV2"),g._Cos=Me("Cos"),g._Cosh=Me("Cosh"),g._CropAndResize=Me("CropAndResize"),g._Cumprod=Me("Cumprod"),g._Cumsum=Me("Cumsum"),g._DenseBincount=Me("DenseBincount"),g._DepthToSpace=Me("DepthToSpace"),g._DepthwiseConv2dNative=Me("DepthwiseConv2dNative"),g._Diag=Me("Diag"),g._Dilation2D=Me("Dilation2D"),g._Dilation2DBackpropFilter=Me("Dilation2DBackpropFilter"),g._Dilation2DBackpropInput=Me("Dilation2DBackpropInput"),g._Elu=Me("Elu"),g._EluGrad=Me("EluGrad"),g._Equal=Me("Equal"),g._Erf=Me("Erf"),g._Exp=Me("Exp"),g._Expm1=Me("Expm1"),g._FlipLeftRight=Me("FlipLeftRight"),g._Floor=Me("Floor"),g._FloorDiv=Me("FloorDiv"),g._FusedBatchNorm=Me("FusedBatchNorm"),g._FusedConv2D=Me("FusedConv2D"),g._FusedDepthwiseConv2D=Me("FusedDepthwiseConv2D"),g._Gather=Me("Gather"),g._GatherNd=Me("GatherNd"),g._Greater=Me("Greater"),g._GreaterEqual=Me("GreaterEqual"),g._IsFinite=Me("IsFinite"),g._IsInf=Me("IsInf"),g._IsNan=Me("IsNan"),g._LRN=Me("LRN"),g._LRNGrad=Me("LRNGrad"),g._LeakyRelu=Me("LeakyRelu"),g._Less=Me("Less"),g._LessEqual=Me("LessEqual"),g._LinSpace=Me("LinSpace"),g._Log=Me("Log"),g._Log1p=Me("Log1p"),g._LogicalAnd=Me("LogicalAnd"),g._LogicalNot=Me("LogicalNot"),g._LogicalOr=Me("LogicalOr"),g._LogicalXor=Me("LogicalXor"),g._Max=Me("Max"),g._MaxPool=Me("MaxPool"),g._MaxPool3D=Me("MaxPool3D"),g._MaxPool3DGrad=Me("MaxPool3DGrad"),g._MaxPoolGrad=Me("MaxPoolGrad"),g._MaxPoolWithArgmax=Me("MaxPoolWithArgmax"),g._Maximum=Me("Maximum"),g._Mean=Me("Mean"),g._Min=Me("Min"),g._Minimum=Me("Minimum"),g._MirrorPad=Me("MirrorPad"),g._Mod=Me("Mod"),g._Multinomial=Me("Multinomial"),g._Multiply=Me("Multiply"),g._Neg=Me("Neg"),g._NonMaxSuppressionV3=Me("NonMaxSuppressionV3"),g._NonMaxSuppressionV4=Me("NonMaxSuppressionV4"),g._NonMaxSuppressionV5=Me("NonMaxSuppressionV5"),g._NotEqual=Me("NotEqual"),g._OneHot=Me("OneHot"),g._PadV2=Me("PadV2"),g._Pow=Me("Pow"),g._Prelu=Me("Prelu"),g._Prod=Me("Prod"),g._RealDiv=Me("RealDiv"),g._Reciprocal=Me("Reciprocal"),g._Relu=Me("Relu"),g._Relu6=Me("Relu6"),g._ResizeBilinear=Me("ResizeBilinear"),g._ResizeBilinearGrad=Me("ResizeBilinearGrad"),g._ResizeNearestNeighbor=Me("ResizeNearestNeighbor"),g._ResizeNearestNeighborGrad=Me("ResizeNearestNeighborGrad"),g._Reverse=Me("Reverse"),g._RotateWithOffset=Me("RotateWithOffset"),g._Round=Me("Round"),g._Rsqrt=Me("Rsqrt"),g._ScatterNd=Me("ScatterNd"),g._SearchSorted=Me("SearchSorted"),g._SelectV2=Me("SelectV2"),g._Selu=Me("Selu"),g._Sigmoid=Me("Sigmoid"),g._Sign=Me("Sign"),g._Sin=Me("Sin"),g._Sinh=Me("Sinh"),g._Softmax=Me("Softmax"),g._Softplus=Me("Softplus"),g._SparseFillEmptyRows=Me("SparseFillEmptyRows"),g._SparseReshape=Me("SparseReshape"),g._SparseSegmentReduction=Me("SparseSegmentReduction"),g._SparseToDense=Me("SparseToDense"),g._Sqrt=Me("Sqrt"),g._Square=Me("Square"),g._SquaredDifference=Me("SquaredDifference"),g._Step=Me("Step"),g._StridedSlice=Me("StridedSlice"),g._Sub=Me("Sub"),g._Sum=Me("Sum"),g._Tan=Me("Tan"),g._Tanh=Me("Tanh"),g._TensorScatterUpdate=Me("TensorScatterUpdate"),g._Tile=Me("Tile"),g._TopK=Me("TopK"),g._Transform=Me("Transform"),g._Transpose=Me("Transpose"),g.__FusedMatMul=Me("_FusedMatMul"),g._malloc=Me("malloc"),g._free=Me("free"),g.__emscripten_tls_init=Me("_emscripten_tls_init");var et=g._pthread_self=Me("pthread_self");g.___errno_location=Me("__errno_location");var tt=g.__emscripten_thread_init=Me("_emscripten_thread_init");g.__emscripten_thread_crashed=Me("_emscripten_thread_crashed"),g._emscripten_main_thread_process_queued_calls=Me("emscripten_main_thread_process_queued_calls");var nt=g._fflush=Me("fflush");g._emscripten_main_browser_thread_id=Me("emscripten_main_browser_thread_id");var at=g._emscripten_run_in_main_runtime_thread_js=Me("emscripten_run_in_main_runtime_thread_js");g._emscripten_dispatch_to_thread_=Me("emscripten_dispatch_to_thread_"),g._emscripten_stack_get_base=function(){return(g._emscripten_stack_get_base=g.asm.emscripten_stack_get_base).apply(null,arguments)};var rt=g._emscripten_stack_get_end=function(){return(rt=g._emscripten_stack_get_end=g.asm.emscripten_stack_get_end).apply(null,arguments)},it=g.__emscripten_proxy_execute_task_queue=Me("_emscripten_proxy_execute_task_queue"),ot=g.__emscripten_thread_free_data=Me("_emscripten_thread_free_data"),st=g.__emscripten_thread_exit=Me("_emscripten_thread_exit"),ut=g._emscripten_stack_init=function(){return(ut=g._emscripten_stack_init=g.asm.emscripten_stack_init).apply(null,arguments)},dt=g._emscripten_stack_set_limits=function(){return(dt=g._emscripten_stack_set_limits=g.asm.emscripten_stack_set_limits).apply(null,arguments)};g._emscripten_stack_get_free=function(){return(g._emscripten_stack_get_free=g.asm.emscripten_stack_get_free).apply(null,arguments)};var lt,ct,pt,mt=g.stackSave=Me("stackSave"),ft=g.stackRestore=Me("stackRestore"),ht=g.stackAlloc=Me("stackAlloc"),bt=g._emscripten_stack_get_current=function(){return(bt=g._emscripten_stack_get_current=g.asm.emscripten_stack_get_current).apply(null,arguments)};function gt(e){if(!(be>0)){if(F||(Y(!F),ut(),ue()),F)return c(g),he(),void startWorker(g);!function(){if(Y(!F),g.preRun)for("function"==typeof g.preRun&&(g.preRun=[g.preRun]);g.preRun.length;)e=g.preRun.shift(),le.unshift(e);var e;Pe(le)}(),be>0||(g.setStatus?(g.setStatus("Running..."),setTimeout((function(){setTimeout((function(){g.setStatus("")}),1),t()}),1)):t(),de())}function t(){lt||(lt=!0,g.calledRun=!0,q||(he(),c(g),g.onRuntimeInitialized&&g.onRuntimeInitialized(),Y(!g._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(de(),!F){if(g.postRun)for("function"==typeof g.postRun&&(g.postRun=[g.postRun]);g.postRun.length;)e=g.postRun.shift(),pe.unshift(e);var e;Pe(pe)}}()))}}if(g.dynCall_iijjiiii=Me("dynCall_iijjiiii"),g.dynCall_jiji=Me("dynCall_jiji"),g.keepRuntimeAlive=fe,g.wasmMemory=G,g.cwrap=function(e,t,n,a){return function(){return Xe(e,t,n,arguments)}},g.ExitStatus=Ee,g.PThread=Re,["run","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createPreloadedFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","getLEB","getFunctionTables","alignFunctionTables","registerFunctions","prettyPrint","getCompilerSetting","out","err","callMain","abort","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","GROWABLE_HEAP_I8","GROWABLE_HEAP_U8","GROWABLE_HEAP_I16","GROWABLE_HEAP_U16","GROWABLE_HEAP_I32","GROWABLE_HEAP_U32","GROWABLE_HEAP_F32","GROWABLE_HEAP_F64","writeStackCookie","checkStackCookie","ptrToString","zeroMemory","stringToNewUTF8","exitJS","getHeapMax","emscripten_realloc_buffer","ENV","ERRNO_CODES","ERRNO_MESSAGES","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","DNS","getHostByName","Protocols","Sockets","getRandomDevice","warnOnce","traverseStack","UNWIND_CACHE","convertPCtoSourceLocation","readEmAsmArgsArray","readEmAsmArgs","runEmAsmFunction","runMainThreadEmAsm","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getCFunc","ccall","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","setValue","getValue","PATH","PATH_FS","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","allocateUTF8","allocateUTF8OnStack","writeStringToMemory","writeArrayToMemory","writeAsciiToMemory","SYSCALLS","getSocketFromFD","getSocketAddress","JSEvents","registerKeyEventCallback","specialHTMLTargets","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","currentFullscreenStrategy","restoreOldWindowedStyle","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","getEnvStrings","checkWasiClock","flush_NO_FILESYSTEM","dlopenMissingError","createDyncallWrapper","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","exception_addRef","exception_decRef","Browser","setMainLoop","wget","tempFixedLengthArray","miniTempWebGLFloatBuffers","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","GL","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","AL","SDL_unicode","SDL_ttfContext","SDL_audio","SDL","SDL_gfx","GLUT","EGL","GLFW_Window","GLFW","GLEW","IDBStore","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","killThread","cleanupThread","registerTLSInit","cancelThread","spawnThread","exitOnMainThread","invokeEntryPoint","executeNotifiedProxyingQueue"].forEach((function(e){Object.getOwnPropertyDescriptor(g,e)||Object.defineProperty(g,e,{configurable:!0,get:function(){var t="'"+e+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";z(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),ve(t)}})})),["stringToNewUTF8","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","getRandomDevice","traverseStack","convertPCtoSourceLocation","readEmAsmArgs","runEmAsmFunction","runMainThreadEmAsm","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","allocateUTF8","allocateUTF8OnStack","writeStringToMemory","writeAsciiToMemory","getSocketFromFD","getSocketAddress","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","getEnvStrings","checkWasiClock","createDyncallWrapper","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","ExceptionInfo","exception_addRef","exception_decRef","setMainLoop","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate"].forEach((function(e){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get:function(){var t="`"+e+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line",n=e;n.startsWith("_")||(n="$"+e),t+=" (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE="+n+")",z(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),Ue(t)}})})),_e=function e(){lt||gt(),lt||(_e=e)},g.preInit)for("function"==typeof g.preInit&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.pop()();if(gt(),b&&(ct={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!b.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!b.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof WasmBackendModule)pt=WasmBackendModule;else{if("undefined"==typeof e)throw new Error("Could not find wasm module in post.js");pt=e}if(ct){var _t=pt._dispose;pt._dispose=function(){_t(),ct.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),ct.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return e.ready});e.exports=o}(cr);var pr=cr.exports,mr=dr(pr),fr=o({__proto__:null,default:mr},[pr]),hr={exports:{}};!function(e){var t,r=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(t=t||__filename),function(e){var r,i,o,s="undefined"!=typeof(e=e||{})?e:{};s.ready=new Promise((function(e,t){r=e,i=t})),["_malloc","_free","_init","_init_with_threads_count","_get_threads_count","_register_tensor","_dispose_data","_dispose","_Abs","_Acos","_Acosh","_Add","_AddN","_All","_Any","_ArgMax","_ArgMin","_Asin","_Asinh","_Atan","_Atan2","_Atanh","_AvgPool","_AvgPool3D","_AvgPool3DGrad","_AvgPoolGrad","_BatchMatMul","_Bincount","_BitwiseAnd","_Ceil","_ClipByValue","_Conv2D","_Conv2DBackpropInput","_Conv3D","_Conv3DBackpropFilterV2","_Conv3DBackpropInputV2","_Cos","_Cosh","_CropAndResize","_Cumprod","_Cumsum","_DenseBincount","_DepthToSpace","_DepthwiseConv2dNative","_Diag","_Dilation2D","_Dilation2DBackpropFilter","_Dilation2DBackpropInput","_Elu","_EluGrad","_Equal","_Erf","_Exp","_Expm1","_FlipLeftRight","_Floor","_FloorDiv","_FusedBatchNorm","_FusedConv2D","_FusedDepthwiseConv2D","_Gather","_GatherNd","_Greater","_GreaterEqual","_IsFinite","_IsInf","_IsNan","_LRN","_LRNGrad","_LeakyRelu","_Less","_LessEqual","_LinSpace","_Log","_Log1p","_LogicalAnd","_LogicalNot","_LogicalOr","_LogicalXor","_Max","_MaxPool","_MaxPool3D","_MaxPool3DGrad","_MaxPoolGrad","_MaxPoolWithArgmax","_Maximum","_Mean","_Min","_Minimum","_MirrorPad","_Mod","_Multinomial","_Multiply","_Neg","_NonMaxSuppressionV3","_NonMaxSuppressionV4","_NonMaxSuppressionV5","_NotEqual","_OneHot","_PadV2","_Pow","_Prelu","_Prod","_RealDiv","_Reciprocal","_Relu","_Relu6","_ResizeBilinear","_ResizeBilinearGrad","_ResizeNearestNeighbor","_ResizeNearestNeighborGrad","_Reverse","_RotateWithOffset","_Round","_Rsqrt","_ScatterNd","_SearchSorted","_SelectV2","_Selu","_Sigmoid","_Sign","_Sin","_Sinh","_Softmax","_Softplus","_SparseFillEmptyRows","_SparseReshape","_SparseSegmentReduction","_SparseToDense","_Sqrt","_Square","_SquaredDifference","_Step","_StridedSlice","_Sub","_Sum","_Tan","_Tanh","_TensorScatterUpdate","_Tile","_TopK","_Transform","_Transpose","__FusedMatMul","_fflush","onRuntimeInitialized"].forEach((function(e){Object.getOwnPropertyDescriptor(s.ready,e)||Object.defineProperty(s.ready,e,{get:function(){return J("You are getting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")},set:function(){return J("You are setting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})})),"undefined"!=typeof process&&process.listeners&&(o={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var u=Object.assign({},s),d="object"==typeof window,l="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,p=!d&&!c&&!l;if(s.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var m,f,h,b="";if(c){if("undefined"==typeof process||!process.release||"node"!==process.release.name)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var g=n,_=a;b=l?_.dirname(b)+"/":__dirname+"/",m=function(e,t){return e=$(e)?new URL(e):_.normalize(e),g.readFileSync(e,t?void 0:"utf8")},h=function(e){var t=m(e,!0);return t.buffer||(t=new Uint8Array(t)),F(t.buffer),t},f=function(e,t,n){e=$(e)?new URL(e):_.normalize(e),g.readFile(e,(function(e,a){e?n(e):t(a.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ne))throw e})),process.on("unhandledRejection",(function(e){throw e})),s.inspect=function(){return"[Emscripten Module object]"}}else if(p){if("object"==typeof process&&"function"==typeof lr||"object"==typeof window||"function"==typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");"undefined"!=typeof read&&(m=function(e){return read(e)}),h=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(F("object"==typeof(t=read(e,"binary"))),t)},f=function(e,t,n){setTimeout((function(){return t(h(e))}),0)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)}else{if(!d&&!l)throw new Error("environment detection error");if(l?b=self.location.href:"undefined"!=typeof document&&document.currentScript&&(b=document.currentScript.src),t&&(b=t),b=0!==b.indexOf("blob:")?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");m=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},l&&(h=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status||0==a.status&&a.response?t(a.response):n()},a.onerror=n,a.send(null)}}var y,v,k,w=s.print||console.log.bind(console),I=s.printErr||console.warn.bind(console);function S(e,t){Object.getOwnPropertyDescriptor(s,e)||Object.defineProperty(s,e,{configurable:!0,get:function(){J("Module."+e+" has been replaced with plain "+t+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function M(e){return"FS_createPath"===e||"FS_createDataFile"===e||"FS_createPreloadedFile"===e||"FS_unlink"===e||"addRunDependency"===e||"FS_createLazyFile"===e||"FS_createDevice"===e||"removeRunDependency"===e}Object.assign(s,u),u=null,y="fetchSettings",Object.getOwnPropertyDescriptor(s,y)&&J("`Module."+y+"` was supplied but `"+y+"` not included in INCOMING_MODULE_JS_API"),s.arguments&&s.arguments,S("arguments","arguments_"),s.thisProgram&&s.thisProgram,S("thisProgram","thisProgram"),s.quit&&s.quit,S("quit","quit_"),F("undefined"==typeof s.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),F("undefined"==typeof s.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),F("undefined"==typeof s.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),F("undefined"==typeof s.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),F("undefined"==typeof s.read,"Module.read option was removed (modify read_ in JS)"),F("undefined"==typeof s.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),F("undefined"==typeof s.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),F("undefined"==typeof s.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),F("undefined"==typeof s.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),S("read","read_"),S("readAsync","readAsync"),S("readBinary","readBinary"),S("setWindowTitle","setWindowTitle"),F(!p,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),s.wasmBinary&&(v=s.wasmBinary),S("wasmBinary","wasmBinary"),s.noExitRuntime,S("noExitRuntime","noExitRuntime"),"object"!=typeof WebAssembly&&J("no native wasm support detected");var A=!1;function F(e,t){e||J("Assertion failed"+(t?": "+t:""))}var E,T,x,D,N="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(e,t,n){for(var a=(t>>>=0)+n,r=t;e[r]&&!(r>=a);)++r;if(r-t>16&&e.buffer&&N)return N.decode(e.subarray(t,r));for(var i="";t<r;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if(224==(240&o)?o=(15&o)<<12|s<<6|u:(240!=(248&o)&&ie("Invalid UTF-8 leading byte "+re(o)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),o=(7&o)<<18|s<<12|u<<6|63&e[t++]),o<65536)i+=String.fromCharCode(o);else{var d=o-65536;i+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function R(e,t){return(e>>>=0)?C(x,e,t):""}function P(e,t,n){return F("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),function(e,t,n,a){if(!(a>0))return 0;for(var r=n>>>=0,i=n+a-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=i)break;t[n++>>>0]=s}else if(s<=2047){if(n+1>=i)break;t[n++>>>0]=192|s>>6,t[n++>>>0]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++>>>0]=224|s>>12,t[n++>>>0]=128|s>>6&63,t[n++>>>0]=128|63&s}else{if(n+3>=i)break;s>1114111&&ie("Invalid Unicode code point "+re(s)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[n++>>>0]=240|s>>18,t[n++>>>0]=128|s>>12&63,t[n++>>>0]=128|s>>6&63,t[n++>>>0]=128|63&s}}return t[n>>>0]=0,n-r}(e,x,t,n)}function O(e){E=e,s.HEAP8=T=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=new Int32Array(e),s.HEAPU8=x=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=D=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=new Float64Array(e)}var L=65536;s.STACK_SIZE&&F(L===s.STACK_SIZE,"the stack size can no longer be determined at runtime");var W=s.INITIAL_MEMORY||16777216;function U(){if(!A){var e=he();0==e&&(e+=4);var t=D[e>>>2],n=D[e+4>>>2];34821223==t&&2310721022==n||J("Stack overflow! Stack cookie has been overwritten at "+re(e)+", expected hex dwords 0x89BACDFE and 0x2135467, but received "+re(n)+" "+re(t)),1668509029!==D[0]&&J("Runtime error: The application has corrupted its heap memory area (address zero)!")}}S("INITIAL_MEMORY","INITIAL_MEMORY"),F(W>=L,"INITIAL_MEMORY should be larger than STACK_SIZE, was "+W+"! (STACK_SIZE="+L+")"),F("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),F(!s.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),F(16777216==W,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"}();var B=[],z=[],G=[],H=!1;F(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),F(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),F(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),F(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var j=0,V=null,q=null,Y={};function J(e){s.onAbort&&s.onAbort(e),I(e="Aborted("+e+")"),A=!0;var t=new WebAssembly.RuntimeError(e);throw i(t),t}var K,Q,X={error:function(){J("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init:function(){X.error()},createDataFile:function(){X.error()},createPreloadedFile:function(){X.error()},createLazyFile:function(){X.error()},open:function(){X.error()},mkdev:function(){X.error()},registerDevice:function(){X.error()},analyzePath:function(){X.error()},loadFilesFromDB:function(){X.error()},ErrnoError:function(){X.error()}};function Z(e){return e.startsWith("data:application/octet-stream;base64,")}function $(e){return e.startsWith("file://")}function ee(e,t){return function(){var n=e,a=t;return t||(a=s.asm),F(H,"native function `"+n+"` called before runtime initialization"),a[e]||F(a[e],"exported native function `"+n+"` not found"),a[e].apply(null,arguments)}}function te(e){try{if(e==K&&v)return new Uint8Array(v);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){J(e)}}function ne(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ae(e){for(;e.length>0;)e.shift()(s)}function re(e){return"0x"+e.toString(16).padStart(8,"0")}function ie(e){ie.shown||(ie.shown={}),ie.shown[e]||(ie.shown[e]=1,c&&(e="warning: "+e),I(e))}function oe(e){try{return k.grow(e-E.byteLength+65535>>>16),O(k.buffer),1}catch(t){I("emscripten_realloc_buffer: Attempted to grow heap from "+E.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}s.FS_createDataFile=X.createDataFile,s.FS_createPreloadedFile=X.createPreloadedFile,Z(K="tfjs-backend-wasm.wasm")||(Q=K,K=s.locateFile?s.locateFile(Q,b):b+Q);var se=[null,[],[]];function ue(e,t){var n=se[e];F(n),0===t||10===t?((1===e?w:I)(C(n,0)),n.length=0):n.push(t)}function de(e,t,n,a,r){var i={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);P(e,t=_e(n),n)}return t},array:function(e){var t=_e(e.length);return function(e,t){F(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),T.set(e,t>>>0)}(e,t),t}},o=function(e){var t=s["_"+e];return F(t,"Cannot call unknown function "+e+", make sure it is exported"),t}(e),u=[],d=0;if(F("array"!==t,'Return type should not be "array".'),a)for(var l=0;l<a.length;l++){var c=i[n[l]];c?(0===d&&(d=be()),u[l]=c(a[l])):u[l]=a[l]}var p=o.apply(null,u);return p=function(e){return 0!==d&&ge(d),function(e){return"string"===t?R(e):"boolean"===t?Boolean(e):e}(e)}(p)}var le={__assert_fail:function(e,t,n,a){J("Assertion failed: "+R(e)+", at: "+[t?R(t):"unknown filename",n,a?R(a):"unknown function"])},abort:function(){J("native code called abort()")},emscripten_get_heap_max:function(){return 4294901760},emscripten_memcpy_big:function(e,t,n){x.copyWithin(e>>>0,t>>>0,t+n>>>0)},emscripten_resize_heap:function(e){var t=x.length;F((e>>>=0)>t);var n=4294901760;if(e>n)return I("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is "+n+" bytes!"),!1;for(var a,r,i=1;i<=4;i*=2){var o=t*(1+.2/i);o=Math.min(o,e+100663296);var s=Math.min(n,(a=Math.max(e,o))+((r=65536)-a%r)%r);if(oe(s))return!0}return I("Failed to grow the heap from "+t+" bytes to "+s+" bytes, not enough memory!"),!1},fd_close:function(e){J("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")},fd_seek:function(e,t,n,a,r){return 70},fd_write:function(e,t,n,a){for(var r=0,i=0;i<n;i++){var o=D[t>>>2],s=D[t+4>>>2];t+=8;for(var u=0;u<s;u++)ue(e,x[o+u>>>0]);r+=s}return D[a>>>2]=r,0}};!function(){var e,t={env:le,wasi_snapshot_preview1:le};function n(e,t){var n,a=e.exports;s.asm=a,F(k=s.asm.memory,"memory not found in wasm exports"),O(k.buffer),F(s.asm.__indirect_function_table,"table not found in wasm exports"),n=s.asm.__wasm_call_ctors,z.unshift(n),function(e){if(j--,s.monitorRunDependencies&&s.monitorRunDependencies(j),e?(F(Y[e]),delete Y[e]):I("warning: run dependency removed without ID"),0==j&&(null!==V&&(clearInterval(V),V=null),q)){var t=q;q=null,t()}}("wasm-instantiate")}e="wasm-instantiate",j++,s.monitorRunDependencies&&s.monitorRunDependencies(j),e?(F(!Y[e]),Y[e]=1,null===V&&"undefined"!=typeof setInterval&&(V=setInterval((function(){if(A)return clearInterval(V),void(V=null);var e=!1;for(var t in Y)e||(e=!0,I("still waiting on run dependencies:")),I("dependency: "+t);e&&I("(end of list)")}),1e4))):I("warning: run dependency added without ID");var a=s;function r(e){F(s===a,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),a=null,n(e.instance)}function o(e){return function(){if(!v&&(d||l)){if("function"==typeof fetch&&!$(K))return fetch(K,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+K+"'";return e.arrayBuffer()})).catch((function(){return te(K)}));if(f)return new Promise((function(e,t){f(K,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return te(K)}))}().then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(e,(function(e){I("failed to asynchronously prepare wasm: "+e),$(K)&&I("warning: Loading from a file URI ("+K+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),J(e)}))}if(s.instantiateWasm)try{return s.instantiateWasm(t,n)}catch(e){I("Module.instantiateWasm callback failed with error: "+e),i(e)}(v||"function"!=typeof WebAssembly.instantiateStreaming||Z(K)||$(K)||c||"function"!=typeof fetch?o(r):fetch(K,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(e){return I("wasm streaming compile failed: "+e),I("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(i)}(),s.___wasm_call_ctors=ee("__wasm_call_ctors"),s._init=ee("init"),s._init_with_threads_count=ee("init_with_threads_count"),s._get_threads_count=ee("get_threads_count"),s._register_tensor=ee("register_tensor"),s._dispose_data=ee("dispose_data"),s._dispose=ee("dispose"),s._Abs=ee("Abs"),s._Acos=ee("Acos"),s._Acosh=ee("Acosh"),s._Add=ee("Add"),s._AddN=ee("AddN"),s._All=ee("All"),s._Any=ee("Any"),s._ArgMax=ee("ArgMax"),s._ArgMin=ee("ArgMin"),s._Asin=ee("Asin"),s._Asinh=ee("Asinh"),s._Atan=ee("Atan"),s._Atan2=ee("Atan2"),s._Atanh=ee("Atanh"),s._AvgPool=ee("AvgPool"),s._AvgPool3D=ee("AvgPool3D"),s._AvgPool3DGrad=ee("AvgPool3DGrad"),s._AvgPoolGrad=ee("AvgPoolGrad"),s._BatchMatMul=ee("BatchMatMul"),s._Bincount=ee("Bincount"),s._BitwiseAnd=ee("BitwiseAnd"),s._Ceil=ee("Ceil"),s._ClipByValue=ee("ClipByValue"),s._Conv2D=ee("Conv2D"),s._Conv2DBackpropInput=ee("Conv2DBackpropInput"),s._Conv3D=ee("Conv3D"),s._Conv3DBackpropFilterV2=ee("Conv3DBackpropFilterV2"),s._Conv3DBackpropInputV2=ee("Conv3DBackpropInputV2"),s._Cos=ee("Cos"),s._Cosh=ee("Cosh"),s._CropAndResize=ee("CropAndResize"),s._Cumprod=ee("Cumprod"),s._Cumsum=ee("Cumsum"),s._DenseBincount=ee("DenseBincount"),s._DepthToSpace=ee("DepthToSpace"),s._DepthwiseConv2dNative=ee("DepthwiseConv2dNative"),s._Diag=ee("Diag"),s._Dilation2D=ee("Dilation2D"),s._Dilation2DBackpropFilter=ee("Dilation2DBackpropFilter"),s._Dilation2DBackpropInput=ee("Dilation2DBackpropInput"),s._Elu=ee("Elu"),s._EluGrad=ee("EluGrad"),s._Equal=ee("Equal"),s._Erf=ee("Erf"),s._Exp=ee("Exp"),s._Expm1=ee("Expm1"),s._FlipLeftRight=ee("FlipLeftRight"),s._Floor=ee("Floor"),s._FloorDiv=ee("FloorDiv"),s._FusedBatchNorm=ee("FusedBatchNorm"),s._FusedConv2D=ee("FusedConv2D"),s._FusedDepthwiseConv2D=ee("FusedDepthwiseConv2D"),s._Gather=ee("Gather"),s._GatherNd=ee("GatherNd"),s._Greater=ee("Greater"),s._GreaterEqual=ee("GreaterEqual"),s._IsFinite=ee("IsFinite"),s._IsInf=ee("IsInf"),s._IsNan=ee("IsNan"),s._LRN=ee("LRN"),s._LRNGrad=ee("LRNGrad"),s._LeakyRelu=ee("LeakyRelu"),s._Less=ee("Less"),s._LessEqual=ee("LessEqual"),s._LinSpace=ee("LinSpace"),s._Log=ee("Log"),s._Log1p=ee("Log1p"),s._LogicalAnd=ee("LogicalAnd"),s._LogicalNot=ee("LogicalNot"),s._LogicalOr=ee("LogicalOr"),s._LogicalXor=ee("LogicalXor"),s._Max=ee("Max"),s._MaxPool=ee("MaxPool"),s._MaxPool3D=ee("MaxPool3D"),s._MaxPool3DGrad=ee("MaxPool3DGrad"),s._MaxPoolGrad=ee("MaxPoolGrad"),s._MaxPoolWithArgmax=ee("MaxPoolWithArgmax"),s._Maximum=ee("Maximum"),s._Mean=ee("Mean"),s._Min=ee("Min"),s._Minimum=ee("Minimum"),s._MirrorPad=ee("MirrorPad"),s._Mod=ee("Mod"),s._Multinomial=ee("Multinomial"),s._Multiply=ee("Multiply"),s._Neg=ee("Neg"),s._NonMaxSuppressionV3=ee("NonMaxSuppressionV3"),s._NonMaxSuppressionV4=ee("NonMaxSuppressionV4"),s._NonMaxSuppressionV5=ee("NonMaxSuppressionV5"),s._NotEqual=ee("NotEqual"),s._OneHot=ee("OneHot"),s._PadV2=ee("PadV2"),s._Pow=ee("Pow"),s._Prelu=ee("Prelu"),s._Prod=ee("Prod"),s._RealDiv=ee("RealDiv"),s._Reciprocal=ee("Reciprocal"),s._Relu=ee("Relu"),s._Relu6=ee("Relu6"),s._ResizeBilinear=ee("ResizeBilinear"),s._ResizeBilinearGrad=ee("ResizeBilinearGrad"),s._ResizeNearestNeighbor=ee("ResizeNearestNeighbor"),s._ResizeNearestNeighborGrad=ee("ResizeNearestNeighborGrad"),s._Reverse=ee("Reverse"),s._RotateWithOffset=ee("RotateWithOffset"),s._Round=ee("Round"),s._Rsqrt=ee("Rsqrt"),s._ScatterNd=ee("ScatterNd"),s._SearchSorted=ee("SearchSorted"),s._SelectV2=ee("SelectV2"),s._Selu=ee("Selu"),s._Sigmoid=ee("Sigmoid"),s._Sign=ee("Sign"),s._Sin=ee("Sin"),s._Sinh=ee("Sinh"),s._Softmax=ee("Softmax"),s._Softplus=ee("Softplus"),s._SparseFillEmptyRows=ee("SparseFillEmptyRows"),s._SparseReshape=ee("SparseReshape"),s._SparseSegmentReduction=ee("SparseSegmentReduction"),s._SparseToDense=ee("SparseToDense"),s._Sqrt=ee("Sqrt"),s._Square=ee("Square"),s._SquaredDifference=ee("SquaredDifference"),s._Step=ee("Step"),s._StridedSlice=ee("StridedSlice"),s._Sub=ee("Sub"),s._Sum=ee("Sum"),s._Tan=ee("Tan"),s._Tanh=ee("Tanh"),s._TensorScatterUpdate=ee("TensorScatterUpdate"),s._Tile=ee("Tile"),s._TopK=ee("TopK"),s._Transform=ee("Transform"),s._Transpose=ee("Transpose"),s.__FusedMatMul=ee("_FusedMatMul"),s._malloc=ee("malloc"),s._free=ee("free"),s.___errno_location=ee("__errno_location"),s._fflush=ee("fflush");var ce=s._emscripten_stack_init=function(){return(ce=s._emscripten_stack_init=s.asm.emscripten_stack_init).apply(null,arguments)};s._emscripten_stack_get_free=function(){return(s._emscripten_stack_get_free=s.asm.emscripten_stack_get_free).apply(null,arguments)},s._emscripten_stack_get_base=function(){return(s._emscripten_stack_get_base=s.asm.emscripten_stack_get_base).apply(null,arguments)};var pe,me,fe,he=s._emscripten_stack_get_end=function(){return(he=s._emscripten_stack_get_end=s.asm.emscripten_stack_get_end).apply(null,arguments)},be=s.stackSave=ee("stackSave"),ge=s.stackRestore=ee("stackRestore"),_e=s.stackAlloc=ee("stackAlloc");function ye(){ce(),function(){var e=he();F(!(3&e)),0==e&&(e+=4),D[e>>>2]=34821223,D[e+4>>>2]=2310721022,D[0]=1668509029}()}function ve(e){function t(){pe||(pe=!0,s.calledRun=!0,A||(F(!H),H=!0,U(),ae(z),r(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),F(!s._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(U(),s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)e=s.postRun.shift(),G.unshift(e);var e;ae(G)}()))}j>0||(ye(),function(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)e=s.preRun.shift(),B.unshift(e);var e;ae(B)}(),j>0||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),t()}),1)):t(),U()))}if(s._emscripten_stack_get_current=function(){return(s._emscripten_stack_get_current=s.asm.emscripten_stack_get_current).apply(null,arguments)},s.dynCall_iijjiiii=ee("dynCall_iijjiiii"),s.dynCall_jiji=ee("dynCall_jiji"),s.cwrap=function(e,t,n,a){return function(){return de(e,t,n,arguments)}},["run","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createPreloadedFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","getLEB","getFunctionTables","alignFunctionTables","registerFunctions","prettyPrint","getCompilerSetting","out","err","callMain","abort","keepRuntimeAlive","wasmMemory","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","ptrToString","zeroMemory","stringToNewUTF8","exitJS","getHeapMax","emscripten_realloc_buffer","ENV","ERRNO_CODES","ERRNO_MESSAGES","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","DNS","getHostByName","Protocols","Sockets","getRandomDevice","warnOnce","traverseStack","UNWIND_CACHE","convertPCtoSourceLocation","readEmAsmArgsArray","readEmAsmArgs","runEmAsmFunction","runMainThreadEmAsm","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getCFunc","ccall","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","setValue","getValue","PATH","PATH_FS","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","allocateUTF8","allocateUTF8OnStack","writeStringToMemory","writeArrayToMemory","writeAsciiToMemory","SYSCALLS","getSocketFromFD","getSocketAddress","JSEvents","registerKeyEventCallback","specialHTMLTargets","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","currentFullscreenStrategy","restoreOldWindowedStyle","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","ExitStatus","getEnvStrings","checkWasiClock","flush_NO_FILESYSTEM","dlopenMissingError","createDyncallWrapper","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","exception_addRef","exception_decRef","Browser","setMainLoop","wget","tempFixedLengthArray","miniTempWebGLFloatBuffers","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","GL","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","AL","SDL_unicode","SDL_ttfContext","SDL_audio","SDL","SDL_gfx","GLUT","EGL","GLFW_Window","GLFW","GLEW","IDBStore","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate"].forEach((function(e){Object.getOwnPropertyDescriptor(s,e)||Object.defineProperty(s,e,{configurable:!0,get:function(){var t="'"+e+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";M(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),J(t)}})})),["zeroMemory","stringToNewUTF8","exitJS","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","getRandomDevice","traverseStack","convertPCtoSourceLocation","readEmAsmArgs","runEmAsmFunction","runMainThreadEmAsm","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","allocateUTF8","allocateUTF8OnStack","writeStringToMemory","writeAsciiToMemory","getSocketFromFD","getSocketAddress","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","getEnvStrings","checkWasiClock","createDyncallWrapper","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","ExceptionInfo","exception_addRef","exception_decRef","setMainLoop","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate"].forEach((function(e){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get:function(){var t="`"+e+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line",n=e;n.startsWith("_")||(n="$"+e),t+=" (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE="+n+")",M(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),ie(t)}})})),q=function e(){pe||ve(),pe||(q=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();if(ve(),o&&(me={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!o.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!o.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof e)fe=e;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");fe=WasmBackendModuleThreadedSimd}if(me){var ke=fe._dispose;fe._dispose=function(){ke(),me.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),me.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return e.ready});e.exports=r}(hr);var br=hr.exports,gr=dr(br),_r=mr||fr,yr=gr||o({__proto__:null,default:gr},[br]),vr=function(e){function n(n){var a=e.call(this)||this;return a.wasm=n,a.dataIdNextNumber=1,a.wasm.tfjs.initWithThreadsCount(Tr),xr=a.wasm.tfjs.getThreadsCount(),a.dataIdMap=new t.DataStorage(a,t.engine()),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),n.prototype.write=function(e,t,n){var a={id:this.dataIdNextNumber++};return this.move(a,e,t,n,1),a},n.prototype.numDataIds=function(){return this.dataIdMap.numDataIds()},n.prototype.time=function(e){return c(this,void 0,void 0,(function(){var n;return p(this,(function(a){return n=t.util.now(),e(),[2,{kernelMs:t.util.now()-n}]}))}))},n.prototype.move=function(e,n,a,r,i){var o=this.dataIdNextNumber++;if("string"!==r){var s=t.util.sizeFromShape(a),u=s*t.util.bytesPerElement(r),d=this.wasm._malloc(u)>>>0;this.dataIdMap.set(e,{id:o,memoryOffset:d,shape:a,dtype:r,refCount:i}),this.wasm.tfjs.registerTensor(o,s,d),null!=n&&this.wasm.HEAPU8.set(new Uint8Array(n.buffer,n.byteOffset,u),d)}else{var l=n;this.dataIdMap.set(e,{id:o,stringBytes:l,shape:a,dtype:r,memoryOffset:null,refCount:i})}},n.prototype.read=function(e){return c(this,void 0,void 0,(function(){return p(this,(function(t){return[2,this.readSync(e)]}))}))},n.prototype.readSync=function(e,n,a){var r=this.dataIdMap.get(e),i=r.memoryOffset,o=r.dtype,s=r.shape,u=r.stringBytes;if("string"===o)return null!=n&&0!==n||!(null==a||a>=u.length)?u.slice(n,a):u;n=n||0,a=a||t.util.sizeFromShape(s);var d=t.util.bytesPerElement(o);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(i+n*d,i+a*d).buffer,o)},n.prototype.disposeData=function(e,t){if(void 0===t&&(t=!1),this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0},n.prototype.refCount=function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0},n.prototype.incRef=function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++},n.prototype.floatPrecision=function(){return 32},n.prototype.getMemoryOffset=function(e){return this.dataIdMap.get(e).memoryOffset},n.prototype.dispose=function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null},n.prototype.memory=function(){return{unreliable:!1}},n.prototype.makeOutput=function(e,n,a,r){var i;if(null==a)i=this.write(null!=r?r:null,e,n);else{var o=this.dataIdNextNumber++;i={id:o},this.dataIdMap.set(i,{id:o,memoryOffset:a,shape:e,dtype:n,refCount:1});var s=t.util.sizeFromShape(e);this.wasm.tfjs.registerTensor(o,s,a)}return{dataId:i,shape:e,dtype:n}},n.prototype.typedArrayFromHeap=function(e){var n=e.shape,a=e.dtype,r=e.dataId,i=this.wasm.HEAPU8.buffer,o=this.dataIdMap.get(r).memoryOffset,s=t.util.sizeFromShape(n);switch(a){case"float32":return new Float32Array(i,o,s);case"int32":return new Int32Array(i,o,s);case"bool":return new Uint8Array(i,o,s);default:throw new Error("Unknown dtype ".concat(a))}},n}(t.KernelBackend);function kr(e,t,n){if(null!=Sr)return Sr;var a="tfjs-backend-wasm.wasm";return e&&t?a="tfjs-backend-wasm-threaded-simd.wasm":e&&(a="tfjs-backend-wasm-simd.wasm"),null!=Ar&&null!=Ar[a]?Ar[a]:n+a}function wr(){return c(this,void 0,void 0,(function(){var e,n,a;return p(this,(function(r){switch(r.label){case 0:return[4,Promise.all([t.env().getAsync("WASM_HAS_SIMD_SUPPORT"),t.env().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")])];case 1:return e=f.apply(void 0,[r.sent(),2]),n=e[0],a=e[1],[2,new Promise((function(e,r){var i,o={};o.locateFile=function(e,t){if(e.endsWith(".worker.js")){var r="/**\n * @license\n * Copyright 2015 The Emscripten Authors\n * SPDX-License-Identifier: MIT\n */\n\n// Pthread Web Worker startup routine:\n// This is the entry point file that is loaded first by each Web Worker\n// that executes pthreads on the Emscripten application.\n\n'use strict';\n\nvar Module = {};\n\n// Node.js support\nvar ENVIRONMENT_IS_NODE = typeof process == 'object' && typeof process.versions == 'object' && typeof process.versions.node == 'string';\nif (ENVIRONMENT_IS_NODE) {\n  // Create as web-worker-like an environment as we can.\n\n  var nodeWorkerThreads = require('worker_threads');\n\n  var parentPort = nodeWorkerThreads.parentPort;\n\n  parentPort.on('message', (data) => onmessage({ data: data }));\n\n  var fs = require('fs');\n\n  Object.assign(global, {\n    self: global,\n    require: require,\n    Module: Module,\n    location: {\n      href: __filename\n    },\n    Worker: nodeWorkerThreads.Worker,\n    importScripts: function(f) {\n      (0, eval)(fs.readFileSync(f, 'utf8') + '//# sourceURL=' + f);\n    },\n    postMessage: function(msg) {\n      parentPort.postMessage(msg);\n    },\n    performance: global.performance || {\n      now: function() {\n        return Date.now();\n      }\n    },\n  });\n}\n\n// Thread-local guard variable for one-time init of the JS state\nvar initializedJS = false;\n\n// Proxying queues that were notified before the thread started and need to be\n// executed as part of startup.\nvar pendingNotifiedProxyingQueues = [];\n\nfunction assert(condition, text) {\n  if (!condition) abort('Assertion failed: ' + text);\n}\n\nfunction threadPrintErr() {\n  var text = Array.prototype.slice.call(arguments).join(' ');\n  // See https://github.com/emscripten-core/emscripten/issues/14804\n  if (ENVIRONMENT_IS_NODE) {\n    fs.writeSync(2, text + '\n');\n    return;\n  }\n  console.error(text);\n}\nfunction threadAlert() {\n  var text = Array.prototype.slice.call(arguments).join(' ');\n  postMessage({cmd: 'alert', text: text, threadId: Module['_pthread_self']()});\n}\n// We don't need out() for now, but may need to add it if we want to use it\n// here. Or, if this code all moves into the main JS, that problem will go\n// away. (For now, adding it here increases code size for no benefit.)\nvar out = () => { throw 'out() is not defined in worker.js.'; }\nvar err = threadPrintErr;\nself.alert = threadAlert;\n\nModule['instantiateWasm'] = (info, receiveInstance) => {\n  // Instantiate from the module posted from the main thread.\n  // We can just use sync instantiation in the worker.\n  var instance = new WebAssembly.Instance(Module['wasmModule'], info);\n  // TODO: Due to Closure regression https://github.com/google/closure-compiler/issues/3193,\n  // the above line no longer optimizes out down to the following line.\n  // When the regression is fixed, we can remove this if/else.\n  receiveInstance(instance);\n  // We don't need the module anymore; new threads will be spawned from the main thread.\n  Module['wasmModule'] = null;\n  return instance.exports;\n}\n\n// Turn unhandled rejected promises into errors so that the main thread will be\n// notified about them.\nself.onunhandledrejection = (e) => {\n  throw e.reason ?? e;\n};\n\n// Add a callback for when the runtime is initialized.\nself.startWorker = (instance) => {\n  Module = instance;\n  // Notify the main thread that this thread has loaded.\n  postMessage({ 'cmd': 'loaded' });\n};\n\nself.onmessage = (e) => {\n  try {\n    if (e.data.cmd === 'load') { // Preload command that is called once per worker to parse and load the Emscripten code.\n\n      // Module and memory were sent from main thread\n      Module['wasmModule'] = e.data.wasmModule;\n\n      // Use `const` here to ensure that the variable is scoped only to\n      // that iteration, allowing safe reference from a closure.\n      for (const handler of e.data.handlers) {\n        Module[handler] = function() {\n          postMessage({ cmd: 'callHandler', handler, args: [...arguments] });\n        }\n      }\n\n      Module['wasmMemory'] = e.data.wasmMemory;\n\n      Module['buffer'] = Module['wasmMemory'].buffer;\n\n      Module['ENVIRONMENT_IS_PTHREAD'] = true;\n\n      if (typeof e.data.urlOrBlob == 'string') {\n        importScripts(e.data.urlOrBlob);\n      } else {\n        var objectUrl = URL.createObjectURL(e.data.urlOrBlob);\n        importScripts(objectUrl);\n        URL.revokeObjectURL(objectUrl);\n      }\n      WasmBackendModuleThreadedSimd(Module);\n    } else if (e.data.cmd === 'run') {\n      // Pass the thread address to wasm to store it for fast access.\n      Module['__emscripten_thread_init'](e.data.pthread_ptr, /*isMainBrowserThread=*/0, /*isMainRuntimeThread=*/0, /*canBlock=*/1);\n\n      assert(e.data.pthread_ptr);\n      // Also call inside JS module to set up the stack frame for this pthread in JS module scope\n      Module['establishStackSpace']();\n      Module['PThread'].receiveObjectTransfer(e.data);\n      Module['PThread'].threadInitTLS();\n\n      if (!initializedJS) {\n\n        // Execute any proxied work that came in before the thread was\n        // initialized. Only do this once because it is only possible for\n        // proxying notifications to arrive before thread initialization on\n        // fresh workers.\n        pendingNotifiedProxyingQueues.forEach(queue => {\n          Module['executeNotifiedProxyingQueue'](queue);\n        });\n        pendingNotifiedProxyingQueues = [];\n        initializedJS = true;\n      }\n\n      try {\n        Module['invokeEntryPoint'](e.data.start_routine, e.data.arg);\n      } catch(ex) {\n        if (ex != 'unwind') {\n          // ExitStatus not present in MINIMAL_RUNTIME\n          if (ex instanceof Module['ExitStatus']) {\n            if (Module['keepRuntimeAlive']()) {\n              err('Pthread 0x' + Module['_pthread_self']().toString(16) + ' called exit(), staying alive due to noExitRuntime.');\n            } else {\n              err('Pthread 0x' + Module['_pthread_self']().toString(16) + ' called exit(), calling _emscripten_thread_exit.');\n              Module['__emscripten_thread_exit'](ex.status);\n            }\n          }\n          else\n          {\n            // The pthread \"crashed\".  Do not call `_emscripten_thread_exit` (which\n            // would make this thread joinable.  Instead, re-throw the exception\n            // and let the top level handler propagate it back to the main thread.\n            throw ex;\n          }\n        } else {\n          // else e == 'unwind', and we should fall through here and keep the pthread alive for asynchronous events.\n          err('Pthread 0x' + Module['_pthread_self']().toString(16) + ' completed its main entry point with an `unwind`, keeping the worker alive for asynchronous operation.');\n        }\n      }\n    } else if (e.data.cmd === 'cancel') { // Main thread is asking for a pthread_cancel() on this thread.\n      if (Module['_pthread_self']()) {\n        Module['__emscripten_thread_exit'](-1);\n      }\n    } else if (e.data.target === 'setimmediate') {\n      // no-op\n    } else if (e.data.cmd === 'processProxyingQueue') {\n      if (initializedJS) {\n        Module['executeNotifiedProxyingQueue'](e.data.queue);\n      } else {\n        // Defer executing this queue until the runtime is initialized.\n        pendingNotifiedProxyingQueues.push(e.data.queue);\n      }\n    } else if (e.data.cmd) {\n      // The received message looks like something that should be handled by this message\n      // handler, (since there is a e.data.cmd field present), but is not one of the\n      // recognized commands:\n      err('worker.js received unknown command ' + e.data.cmd);\n      err(e.data);\n    }\n  } catch(ex) {\n    err('worker.js onmessage() captured an uncaught exception: ' + ex);\n    if (ex && ex.stack) err(ex.stack);\n    if (Module['__emscripten_thread_crashed']) {\n      Module['__emscripten_thread_crashed']();\n    }\n    throw ex;\n  }\n};".replace(/\n/g,"\\n"),i=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(i)}return e.endsWith(".wasm")?kr(n,a,null!=Mr?Mr:t):t+e},Er&&(o.instantiateWasm=(i=kr(n,a,null!=Mr?Mr:""),function(e,n){return t.util.fetch(i,{credentials:"same-origin"}).then((function(t){t.ok||e.env.a("failed to load wasm binary file at '".concat(i,"'")),t.arrayBuffer().then((function(t){WebAssembly.instantiate(t,e).then((function(e){n(e.instance,e.module)}))}))})),{}}));var s,u=!1;o.onAbort=function(){if(!u&&!Fr){Fr=!0;r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})}},a&&n&&null==Sr?(o.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+_r.toString()],{type:"text/javascript"}),s=_r(o)):s=yr(o),s.then((function(t){u=!0,Fr=!1;t.tfjs={init:t.cwrap("init",null,[]),initWithThreadsCount:t.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:t.cwrap("get_threads_count","number",[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})})).catch(r)}))]}}))}))}var Ir=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],Sr=null,Mr=null,Ar={},Fr=!1,Er=!1;var Tr=-1,xr=-1;t.registerBackend("wasm",(function(){return c(void 0,void 0,void 0,(function(){var e;return p(this,(function(t){switch(t.label){case 0:return[4,wr()];case 1:return e=t.sent().wasm,[2,new vr(e)]}}))}))}),2),e.BackendWasm=vr,e.getThreadsCount=function(){if(-1===xr)throw new Error("WASM backend not initialized.");return xr},e.setThreadsCount=function(e){Tr=e},e.setWasmPath=function(e,n){if(void 0===n&&(n=!1),t.deprecationWarn("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),Fr)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");Sr=e,Er=n},e.setWasmPaths=function(e,t){if(void 0===t&&(t=!1),Fr)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)Mr=e;else{Ar=e;var n=Ir.filter((function(e){return null==Ar[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: "+"".concat(n.join(","),". Please either call setWasmPaths with a ")+"map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.")}Er=t},e.version_wasm="0.0.0"}));
//# sourceMappingURL=tf-backend-wasm.min.js.map
